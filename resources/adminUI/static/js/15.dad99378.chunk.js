(this["webpackJsonpfluree-admin-ui"]=this["webpackJsonpfluree-admin-ui"]||[]).push([[15,6,17],{1023:function(e,t,n){"use strict";var a=n(9),s=n(11),r=n(13),o=n(12),l=n.n(o),c=n(0),i=n.n(c),u=n(3),d=n.n(u),h=(n(110),n(8)),f={inline:d.a.bool,disabled:d.a.bool,title:d.a.string,validationState:d.a.oneOf(["success","warning","error",null]),inputRef:d.a.func},p=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.inline,n=e.disabled,r=e.validationState,o=e.inputRef,c=e.className,u=e.style,d=e.title,f=e.children,p=Object(s.a)(e,["inline","disabled","validationState","inputRef","className","style","title","children"]),b=Object(h.f)(p),j=b[0],m=b[1],g=i.a.createElement("input",Object(a.a)({},m,{ref:o,type:"checkbox",disabled:n}));if(t){var O,x=((O={})[Object(h.e)(j,"inline")]=!0,O.disabled=n,O);return i.a.createElement("label",{className:l()(c,x),style:u,title:d},g,f)}var v=Object(a.a)({},Object(h.d)(j),{disabled:n});return r&&(v["has-"+r]=!0),i.a.createElement("div",{className:l()(c,v),style:u},i.a.createElement("label",{title:d},g,f))},t}(i.a.Component);p.propTypes=f,p.defaultProps={inline:!1,disabled:!1,title:""},t.a=Object(h.a)("checkbox",p)},1024:function(e,t,n){"use strict";var a=n(9),s=n(11),r=n(13),o=n(3),l=n.n(o),c=n(0),i=n.n(c),u=n(114),d=n.n(u),h=n(122),f=n(23),p=n(43),b=n(199),j=n(610),m={name:l.a.string,value:l.a.any,onChange:l.a.func,type:l.a.oneOf(["checkbox","radio"]).isRequired},g=function(e){function t(){return e.apply(this,arguments)||this}Object(r.a)(t,e);var n=t.prototype;return n.getValues=function(){var e=this.props.value;return null==e?[]:[].concat(e)},n.handleToggle=function(e){var t=this.props,n=t.type,a=t.onChange,s=this.getValues(),r=-1!==s.indexOf(e);"radio"!==n?a(r?s.filter((function(t){return t!==e})):s.concat([e])):r||a(e)},n.render=function(){var e=this,t=this.props,n=t.children,r=t.type,o=t.name,l=Object(s.a)(t,["children","type","name"]),c=this.getValues();return"radio"!==r||o||d()(!1),delete l.onChange,delete l.value,i.a.createElement(b.a,Object(a.a)({},l,{"data-toggle":"buttons"}),p.a.map(n,(function(t){var n=t.props,a=n.value,s=n.onChange;return i.a.cloneElement(t,{type:r,name:t.name||o,checked:-1!==c.indexOf(a),onChange:Object(f.a)(s,(function(){return e.handleToggle(a)}))})})))},t}(i.a.Component);g.propTypes=m,g.defaultProps={type:"radio"};var O=Object(h.a)(g,{value:"onChange"});O.Button=j.a,t.a=O},1037:function(e,t,n){"use strict";n.r(t);var a=n(39),s=n(63),r=n(31),o=n(32),l=n(46),c=n(45),i=n(4),u=n(0),d=n.n(u),h=n(93),f=n(109),p=n.n(f),b=n(132),j=n(461),m=n(460),g=n(572),O=(n(191),n(466)),x=n(812),v=n(78),y=n(462),S=n(463),w=n(1028),N=n(467),D=n(1041),C=n(1033),A=n(485),R=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={fullTransaction:[]},e.deleteRolesTransaction=function(e,t){return{_id:e,roles:[t],_action:"delete"}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.deleteRolesTransaction(this.props.parentId,this.props.roleId);this.setState({fullTransaction:[e]})}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e._db,a=e.fullRefresh;return Object(i.jsx)(A.a,{value:this.state.fullTransaction,handleClose:t,_db:n,fullRefresh:a})}}]),n}(u.Component),T=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={id:"",doc:"",rules:[],originalRules:[],deleteRule:null,fullTransaction:[],showDeleteRuleModal:!1},e.onChangeID=function(t){e.setState({id:t.target.value,idChanged:!0},(function(){return e.calculatedTransaction()}))},e.onChangeDoc=function(t){e.setState({doc:t.target.value},(function(){return e.calculatedTransaction()}))},e.resetForm=function(t){var n="";t.id&&(n=t.id);var a="";t.doc&&(a=t.doc);var s=[];void 0!==t.roleRules&&t.roleRules.forEach((function(e){s.push(p()(e,"_id"))})),e.setState({id:n,idChanged:!1,doc:a,originalRules:s,rules:s,deleteRule:null,showDeleteRuleModal:!1},(function(){return e.calculatedTransaction()}))},e.handleClose=function(){e.setState({showDeleteRuleModal:!1})},e.calculatedTransaction=function(){var t={_id:e.props._id?e.props._id:"_role",doc:e.state.doc?e.state.doc:"",rules:Object(v.a)(e.state.rules)};e.state.idChanged&&e.props.id!==e.state.id&&(t.id=e.state.id),e.setState({fullTransaction:[t]})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.resetForm(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.resetForm(e)}},{key:"removeRule",value:function(e){var t=this;e=Number(e);var n=this.state.rules.slice(),a=n.indexOf(e);n.splice(a,1),0!==this.state.originalRules.filter((function(t){return t===e})).length?this.setState({showDeleteRuleModal:!0,deleteRule:e}):this.setState({rules:n},(function(){return t.calculatedTransaction()}))}},{key:"addRule",value:function(e){var t=this;e=Number(e);var n=[].concat(Object(v.a)(this.state.rules),[e]);n=Object(v.a)(new Set(n)),this.setState({rules:n},(function(){return t.calculatedTransaction()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t._id,a=t.rules,s=t.transact,r=t.handleClose,o=t.edit,l=t.fullRefresh,c=t._collection,u=t._db,d=t.nestedRules,h=t._fn;return Object(i.jsxs)("div",{className:"text-gray-light",children:[this.state.showDeleteRuleModal?Object(i.jsx)(Q,{roleId:n,ruleId:this.state.deleteRule,_db:u,fullRefresh:l,show:this.state.showDeleteRuleModal,handleClose:this.handleClose,component:"deleteRule"}):null,Object(i.jsx)("h2",{className:"mb20",children:"Edit Role Details"}),Object(i.jsxs)(y.a,{horizontal:!0,onSubmit:function(e){return e.preventDefault()},children:[Object(i.jsxs)(S.a,{controlId:"role-name-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-wrench bg-primary permission-icon-small mb10"}),"Role ID (name):"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{type:"text",name:"roleId",value:this.state.id,placeholder:"Role ID (Name)",onChange:function(t){return e.onChangeID(t)}})})})]}),o?Object(i.jsxs)(S.a,{controlId:"role-id-display",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-wrench bg-primary permission-icon-small mb10"}),"_id:"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,style:{border:"1px solid lightgrey",borderRadius:"3px",width:"160px",height:"39px",padding:"9px 12px"},children:n})]}):null,Object(i.jsxs)(S.a,{controlId:"role-doc-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-wrench bg-primary permission-icon-small mb10"}),"Doc:"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{className:"xs-90",componentClass:"textarea",name:"roleDoc",value:this.state.doc,placeholder:"Doc",onChange:function(t){return e.onChangeDoc(t)}})})})]}),Object(i.jsxs)(S.a,{controlId:"roleRules",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-wrench bg-primary permission-icon-small mb10"}),"Rules"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsx)("div",{className:"border-dashed-light-gray pt10",style:{minHeight:"45px",marginBottom:"5px"},children:a?a.map((function(t){var n=p()(t,"_rule/id","No _rule/Id");n=""===n?"No id":n;var a=p()(t,"_id"),s=p()(t,"_rule/doc","No documentation");return s=""===s?"No documentation":s,Object(i.jsx)(D.a,{placement:"top",overlay:Object(i.jsx)(C.a,{id:p()(t,"_id"),children:s},String(t._id).concat("tooltip")),children:Object(i.jsxs)(b.a,{className:"mb10",bsStyle:"danger",value:a,style:{marginLeft:"5px",display:e.state.rules.includes(a)?null:"none"},onClick:function(){return e.removeRule(a)},children:[n,"\xa0\xa0",Object(i.jsx)("i",{className:"fas fa-times"})]},String(t._id).concat("button"))},String(t._id).concat("overlay"))})):null})})}),Object(i.jsxs)(S.a,{children:[Object(i.jsx)(w.a,{sm:4}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsxs)(j.a,{title:"Add a Rule",id:"rule-selection-dropdown",style:{marginLeft:"5px"},children:[a?a.map((function(t){var n=p()(t,"_rule/id","No id");n=""===n?"No id":n;var a=p()(t,"_rule/doc","No doc");return a=""===a?"No doc":a,Object(i.jsxs)(m.a,{value:p()(t,"_id"),onClick:function(){e.addRule(p()(t,"_id"))},children:[n,": ",a]},p()(t,"_id"))})):null,a&&0!==a.length?null:Object(i.jsx)(m.a,{children:"No Rules"}),d?null:Object(i.jsx)(Q,{_collection:c,component:"addRule",_fn:h,_db:u,fullRefresh:l,transact:s,handleClose:r})]})})})]})]}),Object(i.jsx)(A.a,{value:this.state.fullTransaction,_db:u,handleClose:r,fullRefresh:l})]})]})}}]),n}(u.Component),k=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={fullTransaction:[]},e.deleteAuthTransaction=function(e,t){return{_id:e,auth:[t],_action:"delete"}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.deleteAuthTransaction(this.props.userId,this.props.authId);this.setState({fullTransaction:[e]})}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e._db,a=e.fullRefresh;return Object(i.jsx)(A.a,{value:this.state.fullTransaction,handleClose:t,_db:n,fullRefresh:a})}}]),n}(u.Component),_=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={fullTransaction:[]},e.deleteAuthorityTransaction=function(e,t){return{_id:e,authority:[t],_action:"delete"}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.deleteAuthorityTransaction(this.props.authId,this.props.authorityId);this.setState({fullTransaction:[e]})}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e._db,a=e.fullRefresh;return Object(i.jsx)(A.a,{value:this.state.fullTransaction,handleClose:t,_db:n,fullRefresh:a})}}]),n}(u.Component),M=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={id:"",doc:"",roles:[],authority:[],originalRoles:[],deleteRole:null,originalAuthority:[],deleteAuthority:null,fullTransaction:[],showDeleteRoleModal:!1,showDeleteAuthorityModal:!1},e.onChangeId=function(t){e.setState({id:t.target.value,idChanged:!0},(function(){return e.calculatedTransaction()}))},e.onChangeDoc=function(t){e.setState({doc:t.target.value},(function(){return e.calculatedTransaction()}))},e.resetForm=function(t){var n="";t.id&&(n=t.id);var a="";t.doc&&(a=t.doc);var s=[];void 0!==t.authRoles&&t.authRoles.forEach((function(e){s.push(p()(e,"_id"))}));var r=[];void 0!==t.authAuthority&&t.authAuthority.forEach((function(e){r.push(p()(e,"_id"))})),e.setState({id:n,idChanged:!1,doc:a,originalRoles:s,originalAuthority:r,showDeleteRoleModal:!1,showDeleteAuthorityModal:!1,roles:s,authority:r,deleteRole:null,deleteAuthority:null},(function(){return e.calculatedTransaction()}))},e.calculatedTransaction=function(){var t={_id:e.props._id?e.props._id:"_auth",doc:e.state.doc?e.state.doc:"",roles:Object(v.a)(e.state.roles),authority:Object(v.a)(e.state.authority)};e.state.idChanged&&e.props.id!==e.state.id&&(t.id=e.state.id),e.setState({fullTransaction:[t]})},e.handleClose=function(){e.setState({showDeleteRoleModal:!1})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.resetForm(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.resetForm(e)}},{key:"removeRole",value:function(e){var t=this;e=Number(e);var n=this.state.roles.slice(),a=n.indexOf(e);n.splice(a,1),0!==this.state.originalRoles.filter((function(t){return t===e})).length?this.setState({showDeleteRoleModal:!0,deleteRole:e}):this.setState({roles:n},(function(){return t.calculatedTransaction()}))}},{key:"addRole",value:function(e){var t=this;e=Number(e);var n=[].concat(Object(v.a)(this.state.roles),[e]);n=Object(v.a)(new Set(n)),this.setState({roles:n},(function(){return t.calculatedTransaction()}))}},{key:"removeAuthority",value:function(e){var t=this;e=Number(e);var n=this.state.authority.slice(),a=n.indexOf(e);n.splice(a,1),0!==this.state.originalAuthority.filter((function(t){return t===e})).length?this.setState({showDeleteAuthorityModal:!0,deleteAuthority:e}):this.setState({authority:n},(function(){return t.calculatedTransaction()}))}},{key:"addAuthority",value:function(e){var t=this;e=Number(e);var n=[].concat(Object(v.a)(this.state.authority),[e]);n=Object(v.a)(new Set(n)),this.setState({authority:n},(function(){return t.calculatedTransaction()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t._id,a=t.edit,s=t.user,r=t.roles,o=t.rules,l=t.auth,c=t.transact,u=t.handleClose,d=t.fullRefresh,h=t.nestedRoles,f=t._db,g=s&&s.length>0&&(s["_user/username"]||s[0]["_user/username"])||"No user currently associated with this auth record";return Object(i.jsxs)("div",{className:"text-gray-light",children:[this.state.showDeleteRoleModal?Object(i.jsx)(Q,{roleId:this.state.deleteRole,parentId:n,_db:f,fullRefresh:d,show:this.state.showDeleteRoleModal,handleClose:this.handleClose,component:"deleteRole"}):null,this.state.showDeleteAuthorityModal?Object(i.jsx)(Q,{authId:n,authorityId:this.state.deleteAuthority,_db:f,fullRefresh:d,show:this.state.showDeleteAuthorityModal,handleClose:this.handleAuthClose,component:"deleteAuthority"}):null,a?Object(i.jsx)("h2",{className:"mb20",children:"Edit Auth Record Details"}):null,Object(i.jsxs)(y.a,{horizontal:!0,onSubmit:function(e){return e.preventDefault()},children:[Object(i.jsxs)(S.a,{controlId:"auth-id-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",sm:4,className:"text-left",children:[Object(i.jsx)("i",{className:"fas fa-chess-queen bg-success permission-icon-small mb10"}),"Auth Id (Name):"]}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{type:"text",name:"authId",value:this.state.id,placeholder:"Auth Id (Name)",onChange:function(t){return e.onChangeId(t)}})})})]}),a?Object(i.jsxs)(S.a,{controlId:"auth-id-display",children:[Object(i.jsxs)(w.a,{componentClass:"div",sm:4,className:"text-left",children:[Object(i.jsx)("i",{className:"fas fa-chess-queen bg-success permission-icon-small mb10"}),"_id:"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,style:{border:"1px solid lightgrey",borderRadius:"3px",width:"160px",height:"39px",padding:"9px 12px"},children:n})]}):null,Object(i.jsxs)(S.a,{controlId:"auth-doc-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-chess-queen bg-success permission-icon-small mb10"}),"Doc:"]}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{className:"xs-90",componentClass:"textarea",name:"authDoc",value:this.state.doc,placeholder:"Doc",onChange:function(t){return e.onChangeDoc(t)}})})})]}),Object(i.jsxs)(S.a,{controlId:"auth-authority",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-chess-queen bg-success permission-icon-small mb10"}),"Authority"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsx)("div",{className:"border-dashed-light-gray pt10",style:{minHeight:"45px",marginBottom:"5px"},children:l.map((function(t){var n=p()(t,"_auth/id","No _auth/Id");n=""===n?"No id":n;var a=p()(t,"_id"),s=p()(t,"_auth/doc","No documentation");return s=""===s?"No documentation":s,Object(i.jsx)(D.a,{placement:"top",overlay:Object(i.jsx)(C.a,{id:a,children:s},String(a).concat("tooltip")),children:Object(i.jsxs)(b.a,{className:"mb10",bsStyle:"success",value:a,style:{marginLeft:"5px",display:e.state.authority.includes(a)?null:"none"},onClick:function(){return e.removeAuthority(a)},children:[n,"\xa0\xa0",Object(i.jsx)("i",{className:"fas fa-times"})]},String(a).concat("button"))},String(a).concat("overlay"))}))})})}),Object(i.jsxs)(S.a,{children:[Object(i.jsx)(w.a,{sm:4}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsxs)(j.a,{title:"Add an Authority",id:"auth-selection-dropdown",style:{marginLeft:"5px"},children:[l.map((function(t){var n=p()(t,"_auth/id","No id");n=""===n?"No id":n;var a=p()(t,"_auth/doc","No doc");return a=""===a?"No doc":a,Object(i.jsxs)(m.a,{value:p()(t,"_id"),onClick:function(){e.addAuthority(p()(t,"_id"))},children:[n,": ",a]},p()(t,"_id"))})),l&&0!==l.length?null:Object(i.jsx)(m.a,{children:"No Auth"})]})})})]})]}),Object(i.jsxs)(S.a,{controlId:"user-roles",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-chess-queen bg-success permission-icon-small mb10"}),"Roles"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsx)("div",{className:"border-dashed-light-gray pt10",style:{minHeight:"45px",marginBottom:"5px"},children:r.map((function(t){var n=p()(t,"_role/id","No _role/Id");n=""===n?"No id":n;var a=p()(t,"_id"),s=p()(t,"_role/doc","No documentation");return s=""===s?"No documentation":s,Object(i.jsx)(D.a,{placement:"top",overlay:Object(i.jsx)(C.a,{id:p()(t,"_id"),children:s},String(t._id).concat("tooltip")),children:Object(i.jsxs)(b.a,{className:"mb10",bsStyle:"primary",value:a,style:{marginLeft:"5px",display:e.state.roles.includes(a)?null:"none"},onClick:function(){return e.removeRole(a)},children:[n,"\xa0\xa0",Object(i.jsx)("i",{className:"fas fa-times"})]},String(t._id).concat("button"))},String(t._id).concat("overlay"))}))})})}),Object(i.jsxs)(S.a,{children:[Object(i.jsx)(w.a,{sm:4}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsxs)(j.a,{title:"Add a Role",id:"role-selection-dropdown",style:{marginLeft:"5px"},children:[r.map((function(t){var n=p()(t,"_role/id","No id");n=""===n?"No id":n;var a=p()(t,"_role/doc","No doc");return a=""===a?"No doc":a,Object(i.jsxs)(m.a,{value:p()(t,"_id"),onClick:function(){e.addRole(p()(t,"_id"))},children:[n,": ",a]},p()(t,"_id"))})),r&&0!==r.length?null:Object(i.jsx)(m.a,{children:"No Roles"}),h?null:Object(i.jsx)(Q,{component:"addRole",rules:o,nestedRules:!0,fullRefresh:d,transact:c,handleClose:u})]})})})]})]}),a?Object(i.jsxs)(S.a,{controlId:"auth-id-display",children:[Object(i.jsxs)(w.a,{componentClass:"div",sm:4,className:"text-left",children:[Object(i.jsx)("i",{className:"fas fa-chess-queen bg-success permission-icon-small mb10"}),"Auth User:"]}),Object(i.jsx)(D.a,{placement:"top",overlay:Object(i.jsx)(C.a,{id:"authUserTip",children:'To edit the user associated with an auth record, go to "View Permissions By User"'}),children:Object(i.jsx)(w.a,{componentClass:"div",sm:7,style:{border:"1px solid lightgrey",borderRadius:"3px",height:"39px",padding:"9px 12px"},children:Object(i.jsx)("span",{children:g})})})]}):null,Object(i.jsx)(A.a,{value:this.state.fullTransaction,handleClose:u,_db:f,fullRefresh:d})]})]})}}]),n}(u.Component),I=n(1023),P=n(9),E=n(11),F=n(13),L=n(12),B=n.n(L),z=n(8),U=function(e){function t(){return e.apply(this,arguments)||this}return Object(F.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=Object(E.a)(e,["className"]),a=Object(z.f)(n),s=a[0],r=a[1],o=Object(z.d)(s);return d.a.createElement("div",Object(P.a)({},r,{role:"toolbar",className:B()(t,o)}))},t}(d.a.Component),H=Object(z.a)("btn-toolbar",U),W=n(1024),V=n(610),J=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={fullTransaction:[]},e.deleteRuleTransaction=function(e,t){return{_id:e,rules:[t],_action:"delete"}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.deleteRuleTransaction(this.props.roleId,this.props.ruleId);this.setState({fullTransaction:[e]})}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e._db,a=e.fullRefresh;return Object(i.jsx)(A.a,{value:this.state.fullTransaction,handleClose:t,_db:n,fullRefresh:a})}}]),n}(u.Component),X=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={fullTransaction:[]},e.deleteOpTransaction=function(e,t){return{_id:e,ops:[t],_action:"delete"}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.deleteOpTransaction(this.props.ruleId,this.props.op);this.setState({fullTransaction:[e]})}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e._db,a=e.fullRefresh;return Object(i.jsx)(A.a,{value:this.state.fullTransaction,handleClose:t,_db:n,fullRefresh:a})}}]),n}(u.Component),q=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={fullTransaction:[]},e.deleteFunctionTransaction=function(e,t){return{_id:e,fns:[t],_action:"delete"}},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this.deleteFunctionTransaction(this.props.ruleId,this.props.funId);this.setState({fullTransaction:[e]})}},{key:"render",value:function(){var e=this.props,t=e.handleClose,n=e._db,a=e.fullRefresh;return Object(i.jsx)(A.a,{value:this.state.fullTransaction,handleClose:t,_db:n,fullRefresh:a})}}]),n}(u.Component),K=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={fullTransaction:[],originalFunctions:[],originalOps:[],fns:[],deleteFunction:null,showDeleteFunctionModal:!1,showDeleteOpModal:!1},e.cleanOps=function(e){var t=[],n=JSON.stringify(e);return n.includes("query")&&t.push("query"),n.includes("transact")&&t.push("transact"),n.includes("token")&&t.push("token"),n.includes("logs")&&t.push("logs"),n.includes("all")&&t.push("all"),t},e.componentDidMount=function(){if(e.props.edit)e.handleReceiveProps(e.props,["_id","id","doc","collection","fns","predicates","errorMessage"]);else{e.setState({fullTransaction:[],id:"",doc:"",collection:"",predicates:"",fns:[],errorMessage:""})}e.setState({idChanged:!1}),e.props.ops?e.setState({ops:e.cleanOps(e.props.ops)},(function(){return e.calculatedTransaction()})):e.setState({ops:[]},(function(){return e.calculatedTransaction()})),e.props.ops?e.setState({originalOps:e.cleanOps(e.props.ops)},(function(){return e.calculatedTransaction()})):e.setState({originalOps:[]},(function(){return e.calculatedTransaction()})),e.props.collectionDefault?e.setState({collectionDefault:!0},(function(){return e.calculatedTransaction()})):e.setState({collectionDefault:!1},(function(){return e.calculatedTransaction()}))},e.onChangeKey=function(t,n){var a={};a[t]=n.target?n.target.value:n,"id"===t?(a.idChanged=!0,e.setState(a,(function(){return e.calculatedTransaction()}))):e.setState(a,(function(){return e.calculatedTransaction()}))},e.onChangeOps=function(t){var n=t,a=!1;e.state.originalOps.forEach((function(t){n.includes(t)||(a=!0,e.setState({deleteOp:t,showDeleteOpModal:!0}))})),a||e.setState({ops:t},(function(){return e.calculatedTransaction()}))},e.onChangeCheckKey=function(t,n){var a={};a[t]=n.target.checked,e.setState(a,(function(){return e.calculatedTransaction()}))},e.tooltip=Object(i.jsx)(C.a,{id:"tooltip",children:"Checking this box will make this rule the default for this collection. Either use this or _rule/fns on a rule, but not both."}),e.handleReceiveProps=function(t,n){for(var a={},s=0;s<n.length;s++)"fns"===n[s]?function(){var e=[];void 0!==t.fns&&t.fns.forEach((function(t,n){var a=p()(t,"_id")||p()(t,[n,"_id"]);e.push(a)})),a.fns=e,a.originalFunctions=e}():a[n[s]]=p()(t,n[s],"");e.setState(a)},e.calculatedTransaction=function(){var t={_id:e.state._id?e.state._id:"_rule",doc:e.state.doc,ops:Object(v.a)(e.state.ops)};e.state.idChanged&&e.props.id!==e.state.id&&(t.id=e.state.id),e.state.collectionDefault?t.collectionDefault=!0:t.collectionDefault=!1;var n=null!==e.state.predicates&&""!==e.state.predicates?String(e.state.predicates).split(","):null;null!==n&&(n=n.map((function(e){return e.trim()})),t.predicates=n),null!==e.state.collection&&""!==e.state.collection&&(t.collection=e.state.collection),null!==e.state.fns&&(t.fns=e.state.fns),null!==e.state.errorMessage&&(t.errorMessage=e.state.errorMessage),e.setState({fullTransaction:[t]})},e}return Object(o.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){var t=this;if(e.edit)this.handleReceiveProps(e,["_id","id","doc","collection","predicates","fns","errorMessage"]);else{this.setState({fullTransaction:"",id:"",doc:"",collection:"",predicates:"",fns:[],originalFunctions:[],errorMessage:""})}this.setState({idChanged:!1}),e.ops?this.setState({ops:this.cleanOps(e.ops)},(function(){return t.calculatedTransaction()})):this.setState({ops:[]},(function(){return t.calculatedTransaction()})),e.ops?this.setState({originalOps:this.cleanOps(e.ops)},(function(){return t.calculatedTransaction()})):this.setState({originalOps:[]},(function(){return t.calculatedTransaction()})),e.collectionDefault?this.setState({collectionDefault:!0},(function(){return t.calculatedTransaction()})):this.setState({collectionDefault:!1},(function(){return t.calculatedTransaction()}))}},{key:"addFunction",value:function(e){var t=this;e=Number(e);var n=[].concat(Object(v.a)(this.state.fns),[e]);n=Object(v.a)(new Set(n)),this.setState({fns:n},(function(){return t.calculatedTransaction()}))}},{key:"removeFunction",value:function(e){var t=this;e=Number(e);var n=this.state.fns.slice(),a=n.indexOf(e);n.splice(a,1),0!==this.state.originalFunctions.filter((function(t){return t===e})).length?this.setState({showDeleteFunctionModal:!0,deleteFunction:e}):this.setState({fns:n},(function(){return t.calculatedTransaction()}))}},{key:"handleFunctionClose",value:function(){this.setState({showDeleteFunctionModal:!1,deleteFunction:null})}},{key:"handleOpClose",value:function(){this.setState({showDeleteOpModal:!1,deleteOp:null})}},{key:"render",value:function(){var e=this,t=this.props,n=t.edit,a=t._id,s=t._collection,r=t.fullRefresh,o=t._db,l=t._fn,c=t.handleClose;return Object(i.jsxs)("div",{className:"text-gray-light",children:[n?Object(i.jsx)("h2",{className:"mb20",children:"Edit Rule Details"}):null,this.state.showDeleteFunctionModal?Object(i.jsx)(Q,{ruleId:a,funId:this.state.deleteFunction,_db:o,fullRefresh:r,show:this.state.showDeleteFunctionModal,handleClose:this.handleFunctionClose.bind(this),component:"deleteFunction"}):null,this.state.showDeleteOpModal?Object(i.jsx)(Q,{ruleId:a,op:this.state.deleteOp,_db:o,fullRefresh:r,show:this.state.showDeleteOpModal,handleClose:this.handleOpClose.bind(this),component:"deleteOp"}):null,Object(i.jsxs)(y.a,{horizontal:!0,onSubmit:function(e){e.preventDefault()},children:[Object(i.jsxs)(S.a,{controlId:"ruleName",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-unlock bg-danger permission-icon-small mb10"}),"Rule ID (name):"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{type:"text",name:"ruleId",value:this.state.id,placeholder:"Rule ID (Name)",onChange:function(t){return e.onChangeKey("id",t)}})})})]}),n?Object(i.jsxs)(S.a,{controlId:"rule-id-display",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-unlock bg-danger permission-icon-small mb10"}),"_id:"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,style:{border:"1px solid lightgrey",borderRadius:"3px",width:"160px",height:"39px",padding:"9px 12px"},children:a})]}):null,Object(i.jsxs)(S.a,{controlId:"rule-doc-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-unlock bg-danger permission-icon-small mb10"}),"Doc:"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{className:"xs-90",componentClass:"textarea",name:"roleDoc",value:this.state.doc,placeholder:"Doc",onChange:function(t){return e.onChangeKey("doc",t)}})})})]}),Object(i.jsxs)(S.a,{controlId:"rule-collection-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-unlock bg-danger permission-icon-small mb10"}),"Collection:"]}),Object(i.jsxs)(w.a,{componentClass:"div",sm:7,children:[Object(i.jsx)(S.a,{children:Object(i.jsxs)(N.a,{componentClass:"select",value:this.state.collection,onChange:function(t){return e.onChangeKey("collection",t)},children:[Object(i.jsx)("option",{value:""}),Object(i.jsx)("option",{value:"*",children:"All Collections"}),s.map((function(e){return Object(i.jsx)("option",{value:p()(e,"_collection/name"),children:p()(e,"_collection/name")},p()(e,"_id"))}))]})}),Object(i.jsx)(S.a,{controlId:"ruleCollectionDefault",children:void 0===this.state.collection||""===this.state.collection?null:Object(i.jsx)(I.a,{checked:this.state.collectionDefault,onChange:function(t){return e.onChangeCheckKey("collectionDefault",t)},className:"text-left",children:Object(i.jsx)(D.a,{placement:"right",overlay:this.tooltip,children:Object(i.jsx)("p",{children:"Default"})})})})]})]}),Object(i.jsxs)(S.a,{controlId:"rule-predicates-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-unlock bg-danger permission-icon-small mb10"}),"Predicates"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{type:"text",placeholder:"Rule Predicates",value:this.state.predicates,disabled:this.state.collectionDefault&&""!==this.state.collection,onChange:function(t){return e.onChangeKey("predicates",t)}})})}),Object(i.jsx)(w.a,{componentClass:"div",className:"text-left",sm:4}),Object(i.jsx)(w.a,{componentClass:"div",className:"text-left",sm:7,children:Object(i.jsx)("p",{children:"Separate each predicate with a comma."})})]}),Object(i.jsxs)(S.a,{controlId:"ruleFunction",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-unlock bg-danger permission-icon-small mb10"}),"Function"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsx)("div",{className:"border-dashed-light-gray pt10",style:{minHeight:"45px",marginBottom:"5px"},children:l?l.map((function(t){var n=p()(t,"_fn/name","No Name");n=""===n?"No Name":n;var a=p()(t,"_id"),s=p()(t,"_fn/doc","No doc");return s=""===s?"No doc":s,Object(i.jsx)(D.a,{placement:"top",overlay:Object(i.jsx)(C.a,{id:a,children:s},String(a).concat("tooltip")),children:Object(i.jsxs)(b.a,{className:"mb10",bsStyle:"warning",value:a,style:{marginLeft:"5px",display:e.state.fns.includes(a)?null:"none"},onClick:function(){return e.removeFunction(a)},children:[n,"\xa0\xa0",Object(i.jsx)("i",{className:"fas fa-times"})]},String(a).concat("button"))},String(a).concat("overlay"))})):null})})}),Object(i.jsxs)(S.a,{children:[Object(i.jsx)(w.a,{sm:4}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsxs)(j.a,{title:"Add a Function",id:"predicate-selection-dropdown",style:{marginLeft:"5px"},children:[l?l.map((function(t){var n=p()(t,"_fn/name","No Name");n=""===n?"No Name":n;var a=p()(t,"_id"),s=p()(t,"_fn/doc","No doc");return s=""===s?"No doc":s,Object(i.jsxs)(m.a,{value:a,onClick:function(){console.log("you need to add new function"),e.addFunction(a)},children:[n,": ",s]},n)})):null,l&&0!==l.length?null:Object(i.jsx)(m.a,{children:"No Functions"}),Object(i.jsx)(Q,{component:"addFunction",_db:o,fullRefresh:r,handleClose:c})]})})})]})]}),Object(i.jsxs)(S.a,{controlId:"rule-ops-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-unlock bg-danger permission-icon-small mb10"}),"Ops"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(H,{children:Object(i.jsxs)(W.a,{onChange:function(t){return e.onChangeOps(t)},type:"checkbox",name:"ruleOps",value:this.state.ops,children:[Object(i.jsx)(V.a,{value:"query",children:"Query"}),Object(i.jsx)(V.a,{value:"transact",children:"Transact"}),Object(i.jsx)(V.a,{value:"token",children:"Token"}),Object(i.jsx)(V.a,{value:"logs",children:"Logs"}),Object(i.jsx)(V.a,{value:"all",children:"All"})]},this.state.ops?"loaded":"notLoaded")})})})]}),Object(i.jsxs)(S.a,{controlId:"rule-error-message-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-unlock bg-danger permission-icon-small mb10"}),"Error Message"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{type:"text",value:this.state.errorMessage,onChange:function(t){return e.onChangeKey("errorMessage",t)}})})})]}),Object(i.jsx)(A.a,{value:this.state.fullTransaction,_db:o,fullRefresh:r})]})]})}}]),n}(u.Component),G=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={name:"",params:null,code:"",doc:"",spec:"",language:""},e.resetForm=function(){e.setState({name:"",params:null,code:"",doc:"",spec:"",language:""})},e.calculatedTransaction=function(){var t={_id:"_fn",name:e.state.name?e.state.name:"",doc:e.state.doc?e.state.doc:"",code:e.state.code?e.state.code:"",spec:e.state.spec?e.state.spec:"",language:e.state.language?e.state.language:""};null!==e.state.params&&(t.params=e.state.params.split(",")),e.setState({fullTransaction:[t]})},e.handleClose=function(){e.setState({showDeleteRoleModal:!1})},e}return Object(o.a)(n,[{key:"onChangeValue",value:function(e,t){var n=this,a={};a[e]=t,this.setState(a,(function(){return n.calculatedTransaction()}))}},{key:"componentDidMount",value:function(){this.resetForm()}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleClose,a=t.fullRefresh,s=t._db;return Object(i.jsxs)("div",{className:"text-gray-light",children:[Object(i.jsx)("h2",{className:"mb20",children:"Create New Function"}),Object(i.jsxs)(y.a,{horizontal:!0,onSubmit:function(e){return e.preventDefault()},children:[Object(i.jsxs)(S.a,{controlId:"auth-id-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",sm:4,className:"text-left",children:[Object(i.jsx)("i",{className:"fas fa-code bg-success permission-icon-small mb10"}),"Name:"]}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{type:"text",name:"functionName",value:this.state.name,placeholder:"Function Name",onChange:function(t){return e.onChangeValue("name",t.target.value)}})})})]}),Object(i.jsxs)(S.a,{controlId:"function-doc",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-code bg-success permission-icon-small mb10"}),"Doc:"]}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{className:"xs-90",componentClass:"textarea",name:"functionDoc",value:this.state.doc,placeholder:"Doc",onChange:function(t){return e.onChangeValue("doc",t.target.value)}})})})]}),Object(i.jsxs)(S.a,{controlId:"function-code",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-code bg-success permission-icon-small mb10"}),"Code:"]}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{className:"xs-90",componentClass:"textarea",name:"functionCode",value:this.state.code,placeholder:"Code",onChange:function(t){return e.onChangeValue("code",t.target.value)}})})})]}),Object(i.jsxs)(S.a,{controlId:"function-params",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-code bg-success permission-icon-small mb10"}),"Params:"]}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{className:"xs-90",componentClass:"textarea",name:"functionParams",value:this.state.params,placeholder:"Params",onChange:function(t){return e.onChangeValue("params",t.target.value)}})})}),Object(i.jsxs)(S.a,{children:[Object(i.jsx)(w.a,{sm:4}),Object(i.jsx)(w.a,{sm:7})]})]}),Object(i.jsxs)(S.a,{controlId:"function-language",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-code bg-success permission-icon-small mb10"}),"Language:"]}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(N.a,{className:"xs-90",componentClass:"textarea",name:"functionCode",value:this.state.language,placeholder:"Language",onChange:function(t){return e.onChangeValue("language",t.target.value)}})})})]}),Object(i.jsx)(A.a,{value:this.state.fullTransaction,_db:s,handleClose:n,fullRefresh:a})]})]})}}]),n}(u.Component),Z=n(573),Y=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={username:"",roles:[],additionalAuth:[],originalRoles:[],originalAuth:[],fullTransaction:[],showDeleteRoleModal:!1,showDeleteAuthModal:!1,deleteRole:null,deleteAuth:null},e.handleUsernameChange=function(t){e.setState({username:t,usernameChanged:!0},(function(){return e.calculatedTransaction()}))},e.resetForm=function(t){var n=e.props.results,a="";t.username&&(a=t.username);var s=[];void 0!==t.userRoles&&t.userRoles.forEach((function(e){0!==t.roles.filter((function(t){return t._id===e._id})).length&&s.push(e._id)}));var r=[];void 0!==t.userAuth&&t.userAuth.forEach((function(e){0!==t.auth.filter((function(t){return t._id===e._id})).length&&r.push(e._id)})),e.setState({originalRoles:s,originalAuth:r,roles:s,additionalAuth:[],deleteRole:null,deleteAuth:null,usernameChanged:!1,username:a,results:n,authChanged:!1,showDeleteAuthModal:!1,showDeleteRoleModal:!1},(function(){return e.calculatedTransaction()}))},e.calculatedTransaction=function(){var t=""===e.state.username&&0===e.state.roles.length&&0===e.state.auth?null:{_id:e.props._id?e.props._id:"_user",roles:Object(v.a)(e.state.roles)};e.state.usernameChanged&&e.props.username!==e.state.username&&(t.username=e.state.username),e.state.authChanged&&e.props.auth!==e.state.auth&&(t.auth=e.state.additionalAuth),e.setState({fullTransaction:[t]})},e.handleAuthClose=function(){e.setState({showDeleteAuthModal:!1})},e.handleRoleClose=function(){e.setState({showDeleteRoleModal:!1})},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.resetForm(this.props)}},{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.resetForm(e)}},{key:"removeRole",value:function(e){var t=this;e=Number(e);var n=this.state.roles.slice(),a=n.indexOf(e);n.splice(a,1),0!==this.state.originalRoles.filter((function(t){return t===e})).length?this.setState({showDeleteRoleModal:!0,deleteRole:e}):this.setState({roles:n},(function(){return t.calculatedTransaction()}))}},{key:"addRole",value:function(e){var t=this;e=Number(e);var n=[].concat(Object(v.a)(this.state.roles),[e]);n=Object(v.a)(new Set(n)),this.setState({roles:n},(function(){return t.calculatedTransaction()}))}},{key:"removeAuth",value:function(e){var t=this;e=Number(e);var n=this.state.additionalAuth.slice(),a=n.indexOf(e);n.splice(a,1),0!==this.state.originalAuth.filter((function(t){return t===e})).length?this.setState({showDeleteAuthModal:!0,deleteAuth:e}):this.setState({additionalAuth:n},(function(){return t.calculatedTransaction()}))}},{key:"addAuth",value:function(e){var t=this;if(e=Number(e),0===this.state.originalAuth.filter((function(t){return t===e})).length){var n=[].concat(Object(v.a)(this.state.additionalAuth),[e]);n=Object(v.a)(new Set(n)),this.setState({additionalAuth:n,authChanged:!0},(function(){return t.calculatedTransaction()}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t._id,a=t.edit,s=t.fullRefresh,r=t.roles,o=t.auth,l=t.transact,c=t.rules,u=t.handleClose,d=t.nestedAuth,h=t.nestedRoles,f=t._db,g=[];return o.forEach((function(e){"none"!==p()(e,"_user/_auth","none")&&"none"!==p()(e,["_user/_auth",0,"_id"],"none")&&0!==p()(e,"_user/_auth").length||g.push(e)})),Object(i.jsxs)("div",{className:"text-gray-light",children:[this.state.showDeleteRoleModal?Object(i.jsx)(Q,{roleId:this.state.deleteRole,parentId:n,_db:f,fullRefresh:s,show:this.state.showDeleteRoleModal,handleClose:this.handleRoleClose,component:"deleteRole"}):null,this.state.showDeleteAuthModal?Object(i.jsx)(Q,{authId:this.state.deleteAuth,userId:n,_db:f,fullRefresh:s,show:this.state.showDeleteAuthModal,handleClose:this.handleAuthClose,component:"deleteAuth"}):null,Object(i.jsx)("h2",{className:"mb20",children:a?"Edit User Details":"Create a New User"}),Object(i.jsxs)(y.a,{horizontal:!0,onSubmit:function(e){e.preventDefault()},children:[Object(i.jsxs)(S.a,{controlId:"username-edit",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-user bg-info permission-icon-small mb10"}),"Username:"]}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{children:Object(i.jsx)(Z.a,{children:Object(i.jsx)(N.a,{type:"text",name:"username",value:this.state.username,placeholder:"Username",onChange:function(t){return e.handleUsernameChange(t.target.value)}})})})})]}),a?Object(i.jsxs)(S.a,{controlId:"id-display",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-user bg-info permission-icon-small mb10"}),"_id:"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,style:{border:"1px solid lightgrey",borderRadius:"3px",width:"160px",height:"39px",padding:"9px 12px"},children:n})]}):null,Object(i.jsxs)(S.a,{controlId:"user-roles",children:[Object(i.jsxs)(w.a,{componentClass:"div",className:"text-left",sm:4,children:[Object(i.jsx)("i",{className:"fas fa-user bg-info permission-icon-small mb10"}),"Roles"]}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsx)("div",{className:"border-dashed-light-gray pt10",style:{minHeight:"45px",marginBottom:"5px"},children:r.map((function(t){var n=p()(t,"_role/id","No _role/Id");n=""===n?"No id":n;var a=p()(t,"_id"),s=p()(t,"_role/doc","No documentation");return s=""===s?"No documentation":s,Object(i.jsx)(D.a,{placement:"top",overlay:Object(i.jsx)(C.a,{id:p()(t,"_id"),children:s},String(t._id).concat("tooltip")),children:Object(i.jsxs)(b.a,{className:"mb10",bsStyle:"primary",value:a,style:{marginLeft:"5px",display:e.state.roles.includes(a)?null:"none"},onClick:function(){return e.removeRole(a)},children:[n,"\xa0\xa0",Object(i.jsx)("i",{className:"fas fa-times"})]},String(a).concat("button"))},String(t._id).concat("overlay"))}))})})}),Object(i.jsxs)(S.a,{children:[Object(i.jsx)(w.a,{sm:4}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsxs)(j.a,{title:"Add a Role",id:"role-selection-dropdown",style:{marginLeft:"5px"},children:[r.map((function(t){var n=p()(t,"_role/id","No id");n=""===n?"No id":n;var a=p()(t,"_role/doc","No doc");return a=""===a?"No doc":a,Object(i.jsxs)(m.a,{value:p()(t,"_id"),onClick:function(){e.addRole(p()(t,"_id"))},children:[n,": ",a]},p()(t,"_id"))})),r&&0!==r.length?null:Object(i.jsx)(m.a,{children:"No Roles"}),h?null:Object(i.jsx)(Q,{component:"addRole",edit:!1,roles:r,rules:c,nestedRules:!0,_db:f,fullRefresh:s,transact:l})]})})})]})]}),Object(i.jsxs)(S.a,{controlId:"user-auth",children:[Object(i.jsx)(w.a,{componentClass:"div",className:"text-left",sm:4,children:Object(i.jsxs)("span",{children:[Object(i.jsx)("i",{className:"fas fa-user bg-info permission-icon-small mb10"}),"Auth Records:"]})}),Object(i.jsx)(w.a,{componentClass:"div",sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsx)(D.a,{placement:"left",overlay:Object(i.jsxs)(C.a,{id:"authnote",children:["You may only add auth records that are not attached to any other user."," "]}),children:Object(i.jsx)("div",{className:"border-dashed-light-gray pt10",style:{minHeight:"45px",marginBottom:"5px"},children:o.map((function(t){var n=p()(t,"_auth/id","No _auth/Id");n=""===n?"No id":n;var a=p()(t,"_id"),s=p()(t,"_auth/doc","No documentation");return s=""===s?"No documentation":s,Object(i.jsx)(D.a,{placement:"top",overlay:Object(i.jsx)(C.a,{id:p()(t,"_id"),children:s}),children:Object(i.jsxs)(b.a,{className:"mb10",bsStyle:"success",value:a,style:{marginLeft:"5px",display:e.state.originalAuth.includes(a)||e.state.additionalAuth.includes(a)?null:"none"},onClick:function(){return e.removeAuth(a)},children:[n,"\xa0\xa0",Object(i.jsx)("i",{className:"fas fa-times"})]})})}))})})})}),Object(i.jsxs)(S.a,{children:[Object(i.jsx)(w.a,{sm:4}),Object(i.jsx)(w.a,{sm:7,children:Object(i.jsx)(S.a,{className:"text-left",children:Object(i.jsxs)(j.a,{title:"Add an Auth Record",id:"auth-selection-dropdown",style:{marginLeft:"5px"},children:[g.map((function(t){var n=p()(t,"_auth/id","No id");n=""===n?"No id":n;var a=p()(t,"_auth/doc","No doc");return a=""===a?"No doc":a,Object(i.jsxs)(m.a,{value:p()(t,"_id"),onClick:function(){e.addAuth(p()(t,"_id"))},children:[n,": ",a]},p()(t,"_id"))})),g&&0!==g.length?null:Object(i.jsx)(m.a,{children:"No Available Auth"}),d?null:Object(i.jsx)(Q,{component:"addAuth",edit:!1,roles:r,_db:f,auth:o,nestedRoles:!0,fullRefresh:s,transact:l})]})})})]})]}),Object(i.jsx)(S.a,{controlId:"edit-delete-user",children:Object(i.jsx)(A.a,{value:this.state.fullTransaction,setValueFromTnx:this.props.setValueFromTnx,valueFromTnx:this.props.valueFromTnx,handleClose:u,_db:f,fullRefresh:s})})]})]})}}]),n}(u.Component),Q=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={show:"deleteRole"===e.props.component||"deleteAuth"===e.props.component||"deleteAuthority"===e.props.component||"deleteFunction"===e.props.component||"deleteOp"===e.props.component},e.handleClose=function(){e.props.handleClose?e.props.handleClose():e.setState({show:!1})},e.handleShow=function(){e.setState({show:!0})},e}return Object(o.a)(n,[{key:"componentWillReceiveProps",value:function(e){"deleteRole"!==e.component&&"deleteAuth"!==e.component&&"deleteAuthority"!==this.props.component&&"deleteRule"!==e.component&&"deleteFunction"!==e.component&&"deleteOp"!==e.component||this.setState({show:e.show})}},{key:"render",value:function(){var e=this;return Object(i.jsxs)("div",{children:["deleteRole"===this.props.component||"deleteAuth"===this.props.component||"deleteAuthority"===this.props.component||"deleteRule"===this.props.component||"deleteFunction"===this.props.component||"deleteOp"===this.props.component?null:Object(i.jsx)(m.a,{style:{display:"block",padding:"3px 20px",clear:"both",fontWeight:"normal",lineHeight:"1.3333333",whiteSpace:"nowrap"},onClick:function(){e.handleShow(),e.props.setValueFromTnx("")},children:function(){switch(e.props.component){case"addRole":return"Create New Role";case"addAuth":return"Create New Auth Record";case"addRule":return"Create New Rule";case"addFunction":return"Create New Function";default:return"Create New User"}}()}),Object(i.jsxs)(O.a,{show:this.state.show,onHide:this.handleClose,children:[Object(i.jsxs)(O.a.Header,{closeButton:!0,children:[Object(i.jsxs)(O.a.Title,{style:{fontSize:"20px",fontWeight:"lighter"},children:[Object(i.jsx)("i",{className:function(){switch(e.props.component){case"addRole":return"fas fa-wrench";case"addAuth":return"fas fa-chess-queen";case"addRule":return"fas fa-unlock";case"addFunction":return"fas fa-code";case"deleteRole":return"fas fa-wrench";case"deleteRule":return"fas fa-unlock";case"deleteAuth":case"deleteAuthority":return"fas fa-chess-queen";case"deleteFunction":return"fas fa-code";case"deleteOp":return"fas fa-clipdoard-list";default:return"fas fa-user"}}()})," ","\xa0",function(){switch(e.props.component){case"addRole":return"Create Role";case"addAuth":return"Create New Auth Record";case"addRule":return"Create New Rule";case"addFunction":return"Create New Function";case"deleteRole":return"Delete Role";case"deleteRule":return"Delete Rule";case"deleteAuth":case"deleteAuthority":return"Delete Auth";case"deleteFunction":return"Delete Function";case"deleteOp":return"Delete Op";default:return"Create New User"}}(),Object(i.jsx)("hr",{style:{marginBottom:"0px"}})]}),"addRule"===this.props.component?Object(i.jsxs)("div",{style:{padding:"20px 0 0 20px"},children:["To learn more about rules and rule predicates, refer to the"," ",Object(i.jsx)("a",{href:"https://docs.flur.ee/#defining-rules",rel:"noopener noreferrer",target:"_blank",style:{color:"#d42c7f"},children:Object(i.jsx)("strong",{children:"docs."})})]}):null,"deleteRole"===this.props.component||"deleteAuth"===this.props.component||"deleteAuthority"===this.props.component||"deleteRule"===this.props.component||"deleteFun"===this.props.component||"deleteOp"===this.props.component?Object(i.jsx)(x.a,{bsStyle:"info",children:"If you would like to both update and delete an subject in a record, you must perform each of those transactions separately."}):null]}),Object(i.jsx)(O.a.Body,{children:function(){switch(e.props.component){case"addRole":return Object(i.jsx)(T,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));case"addAuth":return Object(i.jsx)(M,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));case"addRule":return Object(i.jsx)(K,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));case"addFunction":return Object(i.jsx)(G,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));case"deleteAuth":return Object(i.jsx)(k,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));case"deleteAuthority":return Object(i.jsx)(_,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));case"deleteRole":return Object(i.jsx)(R,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));case"deleteRule":return Object(i.jsx)(J,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));case"deleteFunction":return Object(i.jsx)(q,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));case"deleteOp":return Object(i.jsx)(X,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}));default:return Object(i.jsx)(Y,Object(s.a)(Object(s.a)({},e.props),{},{handleClose:e.handleClose}))}}()})]})]})}}]),n}(u.Component),$=n(499),ee=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,o=new Array(a),l=0;l<a;l++)o[l]=arguments[l];return(e=t.call.apply(t,[this].concat(o))).state={selectedType:"user",generateKeysModal:!1,valueFromTnx:""},e.setValueFromTnx=function(t){e.setState((function(e){return Object(s.a)(Object(s.a)({},e),{},{valueFromTnx:t})}))},e.permissionQuery={auth:{select:["*",{"_user/_auth":["_id","_user/username"]},{"_auth/roles":["*",{"_role/rules":["*"]}]}],from:"_auth"},user:{select:["*",{"_user/roles":["*"]},{"_user/auth":["*",{"_auth/roles":["*",{"_roles/rules":["*"]}]}]}],from:"_user"},role:{select:["*",{"_role/rules":["*"]}],from:"_role"},rule:{select:["*"],from:"_rule"},collection:{select:["*"],from:"_collection"},fn:{select:["*"],from:"_fn"}},e.getData=function(){var t=e.props._db,n=t.ip,a=t.db,s=(t.displayError,t.token),r=a.split("/"),o={endpoint:"multi-query",ip:n,network:r[0],db:r[1],body:e.permissionQuery,auth:s};Object(h.a)(o).then((function(t){var n=t.json||t,a=(n=n.result||n).auth,s=n.user,r=n.role,o=n.rule,l=n.collection,c=n.fn;e.setState({_auth:a,_user:s,_role:r,_collection:l,_fn:c,_rule:o})})).catch((function(t){e.setState({error:!0})}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.props._db.openApiServer&&this.getData()}},{key:"toggleGenerateKeysModal",value:function(){this.setState({generateKeysModal:!this.state.generateKeysModal})}},{key:"switchType",value:function(e){this.setState({selectedType:e})}},{key:"render",value:function(){var e=this;if(!this.props._db.openApiServer)return Object(i.jsx)("div",{className:"text-center mt20",children:Object(i.jsx)("h3",{children:"The Permissions page is not currently available with a closed API."})});if(this.state.error)return Object(i.jsx)("div",{});if(!this.state._user||!this.state._auth||!this.state._role||!this.state._rule||!this.state._collection||!this.state._fn)return Object(i.jsx)("div",{className:"loading1",children:"Loading..."});if(this.state._user&&this.state._auth&&this.state._role&&this.state._rule&&this.state._collection&&this.state._fn){var t=this.state,n=t._user,a=t._auth,r=t._role,o=t._rule,l=this.props._db.db;return Object(i.jsxs)("div",{style:{paddingLeft:"40px",marginTop:"40px"},children:[this.state.generateKeysModal?Object(i.jsx)($.a,Object(s.a)(Object(s.a)({},this.props),{},{toggleGenerateKeysModal:this.toggleGenerateKeysModal.bind(this)})):null,Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-sm-8",children:Object(i.jsx)("h2",{className:"mb10 text-uppercase",style:{color:"#091133"},children:Object(i.jsxs)("span",{className:"account-header",children:["\xa0\xa0Permissions: ",l]})})}),Object(i.jsx)("div",{className:"col-sm-4"})]}),Object(i.jsxs)("div",{className:"row panel-stats",children:[Object(i.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(i.jsx)(g.PanelStat,{iconClass:"fas fa-user bg-info",stat:n.length,statText:1===n.length?"User in Ledger":"Users in Ledger",switchType:this.switchType.bind(this),type:"user"})}),Object(i.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(i.jsx)(g.PanelStat,{iconClass:"fas fa-chess-queen bg-success",stat:a.length,statText:"Auth in Ledger",switchType:this.switchType.bind(this),type:"auth"})}),Object(i.jsx)("div",{className:"col-sm-6 col-md-3",children:Object(i.jsx)(g.PanelStat,{iconClass:"fas fa-wrench bg-primary",stat:r.length,statText:1===r.length?"Role in Ledger":"Roles in Ledger",switchType:this.switchType.bind(this),type:"role"})}),Object(i.jsx)("div",{className:"col-sm-6 col-md-3",onClick:function(){return e.setState({selectedType:"rule"})},children:Object(i.jsx)(g.PanelStat,{iconClass:"fas fa-unlock bg-danger",stat:o.length,statText:1===o.length?"Rule in Ledger":"Rules in Ledger",switchType:this.switchType.bind(this),type:"rule"})})]}),Object(i.jsx)("div",{className:"row",children:Object(i.jsxs)("div",{className:"col-sm-9 second-row-panel",style:{background:"white",marginLeft:"15px",maxWidth:"95%"},children:[Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("div",{className:"col-sm-6",children:"auth"===this.state.selectedType?Object(i.jsx)(b.a,{onClick:function(){return e.setState({generateKeysModal:!0})},children:"Generate Keys"}):null}),Object(i.jsxs)("div",{className:"col-sm-6 text-right",children:[Object(i.jsx)("h3",{style:{display:"inline"},children:"View Permissions by:\xa0"}),Object(i.jsx)(j.a,{title:this.state.selectedType,id:"type-selection-dropdown",className:"text-capitalize",children:["user","auth","role","rule"].map((function(t){return Object(i.jsx)(m.a,{className:"text-capitalize",onClick:function(){e.setState({selectedType:t})},children:t},t)}))})]})]}),Object(i.jsx)("div",{className:"row",children:Object(i.jsx)("div",{className:"col-sm-12",children:Object(i.jsx)(te,Object(s.a)(Object(s.a)(Object(s.a)({valueFromTnx:this.state.valueFromTnx,setValueFromTnx:this.setValueFromTnx},this.props),this.state),{},{type:this.state.selectedType,refreshData:this.getData}))})})]})})]})}}}]),n}(u.Component),te=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={selectedIndex:0,loading:!1},e.transact=function(t){e.setState({loading:!0});var n=e.props._db,a=n.ip,s=n.db,r=n.token,o=s.split("/"),l={endpoint:"transact",ip:a,network:o[0],db:o[1],body:t,auth:r};Object(h.a)(l).then((function(t){e.setState({loading:!1}),e.fullRefresh(),e.props.setValueFromTnx("")})).catch((function(t){var n=t.json||t;e.setState({loading:!1,error:!0}),e.props._db.displayError(n)}))},e.fullRefresh=function(t){e.props.refreshData(t)},e.UNSAFE_componentWillReceiveProps=function(t){var n=e.props.type,a=p()(e.props,"_".concat(n))[e.state.selectedIndex],s=p()(t,"_".concat(n))[e.state.selectedIndex],r=p()(t,"_".concat(n));if(e.props.type!==t.type)e.setState({selectedIndex:0});else if(0===r.length||void 0===a)e.setState({selectedIndex:0});else if(a._id!==s._id){for(var o,l=0;l<r.length;l++){if(r[l]._id===a._id){o=l;break}o=0}e.setState({selectedIndex:o})}},e.generateDeleteSubjectTransaction=function(t){return[{_id:p()(e.props,"_".concat(t))[e.state.selectedIndex]._id,_action:"delete"}]},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t._user,r=t._auth,o=t._role,l=t._rule,c=t._collection,u=t._fn,d=t._db,h=t.valueFromTnx,f=t.setValueFromTnx,g=this.props.type,O=this.props.results;if(0===p()(this.props,"_".concat(g)).length)return Object(i.jsxs)("div",{children:[Object(i.jsxs)("div",{className:"text-center mt20",style:{backgroundColor:"#fcf8e3",border:"1px solid #faebcc",color:"#8a6d3b",padding:"15px"},children:[Object(i.jsxs)("strong",{children:["There are no ",g,"s associated with this ledger."]}),this.state.loading?Object(i.jsx)("div",{className:"loading1",children:" Loading... "}):null]}),Object(i.jsx)("div",{className:"mt10 text-center",children:function(){switch(g){case"auth":return Object(i.jsx)(M,{edit:!1,roles:o,rules:l,auth:r,_collection:c,_db:d,fullRefresh:e.fullRefresh});case"role":return Object(i.jsx)(T,{edit:!1,rules:l,_collection:c,_db:d,fullRefresh:e.fullRefresh,_fn:u});case"rule":return Object(i.jsx)(K,{edit:!1,_db:d,_collection:c,fullRefresh:e.fullRefresh,_fn:u,component:"addRule"});default:return Object(i.jsx)(Y,{edit:!1,roles:o,rules:l,auth:r,valueFromTnx:h,setValueFromTnx:e.props.setValueFromTnx,_db:d,fullRefresh:e.fullRefresh,results:O})}}()})]});var x=function(t,n,h){return Object(i.jsxs)(j.a,{style:{minWidth:"100px"},title:p()(t,[e.state.selectedIndex,n])?p()(t[e.state.selectedIndex],n):"No ".concat(n),id:"permission-dropdown",children:[t.map((function(t,a){return Object(i.jsx)(m.a,{onClick:function(){e.setState({selectedIndex:a})},children:p()(t,n)?p()(t,n):"No ".concat(n)},t._id)})),function(){var t;switch(h){case"auth":return Object(i.jsx)(Q,{roles:o,_db:d,auth:r,fullRefresh:e.fullRefresh,component:"addAuth",setValueFromTnx:e.props.setValueFromTnx,nestedRoles:!0});case"role":return Object(i.jsx)(Q,Object(s.a)(Object(s.a)({},e.props),{},{edit:!1,rules:l,_fn:u,_collection:c,component:"addRole",_db:d,fullRefresh:e.fullRefresh,nestedRules:!0}));case"rule":return Object(i.jsx)(Q,Object(s.a)(Object(s.a)({},e.props),{},{_collection:c,_fn:u,component:"addRule",_db:d,fullRefresh:e.fullRefresh}));default:return Object(i.jsx)(Q,(t={edit:!1,auth:r,roles:o,_db:d,valueFromTnx:e.props.valueFromTnx,setValueFromTnx:e.props.setValueFromTnx,fullRefresh:e.fullRefresh},Object(a.a)(t,"fullRefresh",e.fullRefresh),Object(a.a)(t,"nestedRoles",!0),Object(a.a)(t,"nestedAuth",!0),Object(a.a)(t,"component","addUser"),t))}}()]})};return Object(i.jsxs)("div",{children:[this.state.loading?Object(i.jsx)("div",{className:"loading1",children:" Loading... "}):null,Object(i.jsxs)("div",{className:"row mt20 border-top-light-gray",children:[Object(i.jsx)("div",{className:"col-sm-9 mt20",children:Object(i.jsx)("div",{className:"text-center",children:Object(i.jsx)("div",{className:"mt20",children:function(){switch(g){case"auth":return Object(i.jsxs)("div",{children:[Object(i.jsx)("i",{className:"fas fa-chess-queen bg-success permission-icon-small"})," ","Auth Record:\xa0",x(r,"_auth/id","auth")]});case"role":return Object(i.jsxs)("div",{children:[Object(i.jsx)("i",{className:"fas fa-wrench bg-primary permission-icon-small"})," ","Role:\xa0",x(o,"_role/id","role")]});case"rule":return Object(i.jsxs)("div",{children:[Object(i.jsx)("i",{className:"fas fa-unlock bg-danger permission-icon-small"}),"\xa0Rule:\xa0",x(l,"_rule/id","rule")]});default:return Object(i.jsxs)("div",{children:[Object(i.jsx)("i",{className:"fas fa-user bg-info permission-icon-small"})," ","User:\xa0",x(n,"_user/username","user")]})}}()})})}),Object(i.jsx)("div",{className:"col-sm-3 mt20",children:Object(i.jsx)("div",{className:"text-right mt20",children:Object(i.jsxs)(b.a,{bsStyle:"danger",className:"text-capitalize",onClick:function(){var t=e.generateDeleteSubjectTransaction(g);e.transact(t)},children:[Object(i.jsx)("i",{className:"far fa-trash-alt"}),"\xa0 Delete"]})})})]}),Object(i.jsxs)("div",{className:"row mb10 mt10 pt20 border-top-light-gray border-bottom-light-gray",children:[Object(i.jsx)("div",{className:"col-xs-12 mb10",children:function(){switch(g){case"auth":var t=p()(r[e.state.selectedIndex],"_auth/id"),a=p()(r[e.state.selectedIndex],"_id"),s=p()(r[e.state.selectedIndex],"_auth/doc"),h=p()(r[e.state.selectedIndex],["_user/_auth"]),b=p()(r[e.state.selectedIndex],"_auth/roles"),j=p()(r[e.state.selectedIndex],"_auth/authority");return Object(i.jsx)(M,{edit:!0,id:t,_id:a,doc:s,user:h,auth:r,roles:o,rules:l,_collection:c,authRoles:b,authAuthority:j,_db:d,fullRefresh:e.fullRefresh});case"role":var m=p()(o[e.state.selectedIndex],"_role/id"),O=p()(o[e.state.selectedIndex],"_id"),x=p()(o[e.state.selectedIndex],"_role/doc"),v=p()(o[e.state.selectedIndex],"_role/rules");return Object(i.jsx)(T,{edit:!0,id:m,_id:O,rules:l,doc:x,_collection:c,roleRules:v,_db:d,_fn:u,fullRefresh:e.fullRefresh});case"rule":var y=p()(l[e.state.selectedIndex],"_rule/id"),S=p()(l[e.state.selectedIndex],"_id"),w=p()(l[e.state.selectedIndex],"_rule/doc"),N=p()(l[e.state.selectedIndex],"_rule/ops"),D=p()(l[e.state.selectedIndex],"_rule/collectionDefault"),C=p()(l[e.state.selectedIndex],"_rule/collection"),A=p()(l[e.state.selectedIndex],"_rule/fns"),R=p()(l[e.state.selectedIndex],"_rule/attributes"),k=p()(l[e.state.selectedIndex],"_rule/errorMessage");return Object(i.jsx)(K,{edit:!0,_collection:c,_fn:u,id:y,_id:S,doc:w,ops:N,collectionDefault:D,collection:C,fns:A,predicates:R,errorMessage:k,_db:d,fullRefresh:e.fullRefresh});default:var _=p()(n[e.state.selectedIndex],"_user/username","No Username"),I=p()(n[e.state.selectedIndex],"_id"),P=p()(n[e.state.selectedIndex],"_user/roles"),E=p()(n[e.state.selectedIndex],"_user/auth");return Object(i.jsx)(Y,{edit:!0,username:_,_id:I,roles:o,rules:l,auth:r,userRoles:P,userAuth:E,allUsers:n,_db:d,valueFromTnx:e.props.valueFromTnx,setValueFromTnx:f,fullRefresh:e.fullRefresh})}}()}),Object(i.jsx)("div",{className:"col-sm-1"})]})]})}}]),n}(u.Component);t.default=ee},485:function(e,t,n){"use strict";var a=n(31),s=n(32),r=n(46),o=n(45),l=n(4),c=n(0),i=n(463),u=n(132),d=n(490),h=n.n(d),f=(n(493),n(494),n(93)),p=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={value:JSON.stringify(e.props.value,null,2),valueFromTnx:JSON.stringify(e.props.valueFromTnx,null,2)},e.onChange=function(t){e.setState({value:t})},e.transact=function(t){e.setState({loading:!0});var n=e.props._db,a=n.ip,s=n.db,r=n.token,o=s.split("/"),l={endpoint:"transact",ip:a,network:o[0],db:o[1],body:t,auth:r};Object(f.a)(l).then((function(e){return e.json||e})).then((function(e){return e.result||e})).then((function(t){e.props.fullRefresh(t),e.props.setValueFromTnx(JSON.stringify(t,null,2))})).catch((function(t){e.setState({loading:!1,response:t})}))},e}return Object(s.a)(n,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.setState({value:JSON.stringify(e.value,null,2)})}},{key:"render",value:function(){var e=this;return Object(l.jsx)(i.a,{children:Object(l.jsxs)("div",{style:{margin:"5px 40px 0px 20px"},children:[Object(l.jsx)("h2",{className:"text-center",style:{padding:"2px",color:"#8e8989",fontFamily:"Open Sans"},children:"Transaction"}),Object(l.jsx)(h.a,{mode:"json",theme:"xcode",name:"user-transaction",fontSize:14,showPrintMargin:!0,showGutter:!0,onChange:this.onChange,width:"90%",height:"150px",highlightActiveLine:!0,value:this.state.value,editorProps:{$blockScrolling:!0},setOptions:{showLineNumbers:!0,tabSize:2}}),Object(l.jsx)("div",{style:{width:"90%"},className:"text-right",children:Object(l.jsxs)(u.a,{bsStyle:"success",className:"mt10 text-right",onClick:function(){e.transact(JSON.parse(e.state.value))},children:[Object(l.jsx)("i",{className:"far fa-edit permission-icon-small"}),"Transact!"]})}),Object(l.jsxs)("div",{className:"mt10",children:[Object(l.jsx)("h2",{className:"text-center",style:{padding:"2px",color:"#8e8989",fontFamily:"Open Sans"},children:"Results"}),Object(l.jsx)(h.a,{mode:"json",theme:"xcode",name:"user-transaction",fontSize:14,showPrintMargin:!0,showGutter:!0,width:"90%",height:"150px",highlightActiveLine:!0,value:this.props.valueFromTnx,editorProps:{$blockScrolling:!0},setOptions:{showLineNumbers:!0,tabSize:2}})]})]})})}}]),n}(c.Component);t.a=p},486:function(e,t,n){"use strict";function a(e){var t,n,a,s,r,o;return null!=(o=e.data||null)&&o.length?(s=e.columnDelimiter||",",r=e.lineDelimiter||"\n",a=Object.keys(o[0]),t="",t+=a.join(s),t+=r,o.forEach((function(e){n=0,a.forEach((function(a){n>0&&(t+=s),t+=e[a],n++})),t+=r})),t):null}function s(e,t){var n="flureeQL"===t?e+"_history":e+"_"+t+"history",a=localStorage.getItem(n);return a?JSON.parse(a):"flureeQL"===t?[{action:"query",type:"query",param:JSON.stringify({select:["*"],from:"_collection"},null,2)}]:"sparQL"===t?[{action:"query",type:"query",param:"SELECT ?collection \nWHERE { \n  ?collectionID fdb:_collection/name ?collection. \n  }"}]:"sql"===t?[{action:"query",type:"query",param:"SELECT * FROM _collection"}]:void 0}function r(e,t,n,a,s,r,o){var l="flureeQL"===o?e+"_history":e+"_"+o+"history",c="flureeQL"===o?e+"_result":e+"_"+o+"result";if(!t[0]||a!==t[0].param){var i={action:n,param:JSON.stringify(a).length>5e3?"Values greater than 5k are not saved in the admin UI.":a};"query"===n&&(i.type=r),t.unshift(i)}t.length>50&&t.splice(-1,1);var u=JSON.stringify(s).length>5e3?"Values greater than 5k are not saved in the admin UI.":s;return localStorage.setItem(l,JSON.stringify(t)),localStorage.setItem(c,JSON.stringify(u)),t}function o(e,t){for(var n=0;n<e.length;n++)if(e[n].type===t)return e[n].param}function l(e){for(var t=0;t<e.length;t++)return e[t]}n.d(t,"a",(function(){return a})),n.d(t,"d",(function(){return s})),n.d(t,"e",(function(){return r})),n.d(t,"c",(function(){return o})),n.d(t,"b",(function(){return l}))},488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findInArray=function(e,t){for(var n=0,a=e.length;n<a;n++)if(t.apply(t,[e[n],n,e]))return e[n]},t.isFunction=function(e){return"function"===typeof e||"[object Function]"===Object.prototype.toString.call(e)},t.isNum=function(e){return"number"===typeof e&&!isNaN(e)},t.int=function(e){return parseInt(e,10)},t.dontSetMe=function(e,t,n){if(e[t])return new Error("Invalid prop ".concat(t," passed to ").concat(n," - do not set this, set it on the child."))}},495:function(e,t,n){"use strict";function a(e){return(a="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.matchesSelector=d,t.matchesSelectorAndParentsTo=function(e,t,n){var a=e;do{if(d(a,t))return!0;if(a===n)return!1;a=a.parentNode}while(a);return!1},t.addEvent=function(e,t,n,a){if(!e)return;var s=c({capture:!0},a);e.addEventListener?e.addEventListener(t,n,s):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},t.removeEvent=function(e,t,n,a){if(!e)return;var s=c({capture:!0},a);e.removeEventListener?e.removeEventListener(t,n,s):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null},t.outerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,s.int)(n.borderTopWidth),t+=(0,s.int)(n.borderBottomWidth)},t.outerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t+=(0,s.int)(n.borderLeftWidth),t+=(0,s.int)(n.borderRightWidth)},t.innerHeight=function(e){var t=e.clientHeight,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,s.int)(n.paddingTop),t-=(0,s.int)(n.paddingBottom)},t.innerWidth=function(e){var t=e.clientWidth,n=e.ownerDocument.defaultView.getComputedStyle(e);return t-=(0,s.int)(n.paddingLeft),t-=(0,s.int)(n.paddingRight)},t.offsetXYFromParent=function(e,t,n){var a=t===t.ownerDocument.body?{left:0,top:0}:t.getBoundingClientRect(),s=(e.clientX+t.scrollLeft-a.left)/n,r=(e.clientY+t.scrollTop-a.top)/n;return{x:s,y:r}},t.createCSSTransform=function(e,t){var n=h(e,t,"px");return i({},(0,r.browserPrefixToKey)("transform",r.default),n)},t.createSVGTransform=function(e,t){return h(e,t,"")},t.getTranslation=h,t.getTouch=function(e,t){return e.targetTouches&&(0,s.findInArray)(e.targetTouches,(function(e){return t===e.identifier}))||e.changedTouches&&(0,s.findInArray)(e.changedTouches,(function(e){return t===e.identifier}))},t.getTouchIdentifier=function(e){if(e.targetTouches&&e.targetTouches[0])return e.targetTouches[0].identifier;if(e.changedTouches&&e.changedTouches[0])return e.changedTouches[0].identifier},t.addUserSelectStyles=function(e){if(!e)return;var t=e.getElementById("react-draggable-style-el");t||((t=e.createElement("style")).type="text/css",t.id="react-draggable-style-el",t.innerHTML=".react-draggable-transparent-selection *::-moz-selection {all: inherit;}\n",t.innerHTML+=".react-draggable-transparent-selection *::selection {all: inherit;}\n",e.getElementsByTagName("head")[0].appendChild(t));e.body&&f(e.body,"react-draggable-transparent-selection")},t.removeUserSelectStyles=function(e){if(!e)return;try{if(e.body&&p(e.body,"react-draggable-transparent-selection"),e.selection)e.selection.empty();else{var t=(e.defaultView||window).getSelection();t&&"Caret"!==t.type&&t.removeAllRanges()}}catch(n){}},t.addClassName=f,t.removeClassName=p;var s=n(488),r=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==a(e)&&"function"!==typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var n={},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var l=s?Object.getOwnPropertyDescriptor(e,r):null;l&&(l.get||l.set)?Object.defineProperty(n,r,l):n[r]=e[r]}n.default=e,t&&t.set(e,n);return n}(n(552));function o(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u="";function d(e,t){return u||(u=(0,s.findInArray)(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(function(t){return(0,s.isFunction)(e[t])}))),!!(0,s.isFunction)(e[u])&&e[u](t)}function h(e,t,n){var a=e.x,s=e.y,r="translate(".concat(a).concat(n,",").concat(s).concat(n,")");if(t){var o="".concat("string"===typeof t.x?t.x:t.x+n),l="".concat("string"===typeof t.y?t.y:t.y+n);r="translate(".concat(o,", ").concat(l,")")+r}return r}function f(e,t){e.classList?e.classList.add(t):e.className.match(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)")))||(e.className+=" ".concat(t))}function p(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(?:^|\\s)".concat(t,"(?!\\S)"),"g"),"")}},499:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var a=n(31),s=n(32),r=n(46),o=n(45),l=n(4),c=n(0),i=n.n(c),u=n(466),d=n(1029),h=n(812),f=n(485),p=n(484),b=n(486),j=function(e){Object(r.a)(n,e);var t=Object(o.a)(n);function n(){var e;Object(a.a)(this,n);for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e.generateKeys=function(){var t=Object(p.generateKeyPair)(),n=t.publicKey,a=t.privateKey,s=Object(p.getSinFromPublicKey)(n),r=[{_id:"_auth",id:s,roles:[["_role/id","root"]]}];e.setState({publicKey:n,privateKey:a,authId:s,tx:r,loading:!1})},e}return Object(s.a)(n,[{key:"handleClose",value:function(){this.props.toggleGenerateKeysModal()}},{key:"componentDidMount",value:function(){this.generateKeys()}},{key:"downloadKeys",value:function(){var e=[{"Public Key":this.state.publicKey,"Private Key":this.state.privateKey,"Auth Id":this.state.authId}],t=Object(b.a)({data:e});if(null!==t){var n=document.createElement("a");n.href="data:text/csv;charset=utf-8,"+t,n.target="_blank",n.download="keys.csv",n.click()}}},{key:"render",value:function(){var e=this;return Object(l.jsxs)(u.a,{show:!0,onHide:this.handleClose.bind(this),children:[Object(l.jsx)(u.a.Header,{closeButton:!0,style:{paddingBottom:"0px"},children:Object(l.jsxs)(u.a.Title,{style:{fontSize:"20px",fontWeight:"lighter"},children:[Object(l.jsx)("i",{className:"fas fa-key"})," \xa0 ",Object(l.jsx)("i",{className:"fas fa-key"})," ","\xa0 Generate Keys",Object(l.jsx)("hr",{style:{marginBottom:"0px"}})]})}),Object(l.jsx)(u.a.Body,{children:!this.state.loading||this.state.publicKey||this.state.privateKey||this.state.authId?Object(l.jsxs)("div",{children:[Object(l.jsx)("div",{className:"row",children:Object(l.jsxs)("div",{className:"col-sm-12",children:[Object(l.jsx)("h3",{children:"Managing Your Public and Private Keys"}),Object(l.jsx)("br",{}),Object(l.jsxs)("ul",{children:[Object(l.jsxs)("li",{children:["Please"," ",Object(l.jsxs)("strong",{children:[" ",Object(l.jsxs)("a",{style:{cursor:"pointer"},onClick:function(){return e.downloadKeys()},children:["save your public and private keys"," "]})]}),". This is the only time you will be able to view them through the user interface."]}),Object(l.jsx)("br",{}),Object(l.jsxs)("li",{children:["In order to connect your key pair to an auth record, please ",Object(l.jsx)("strong",{children:"submit the below transaction"}),". By default, the below transaction will connect the new auth record to the root role, but this can be modified."]})]}),Object(l.jsx)("br",{})]})}),Object(l.jsxs)("div",{className:"row",children:[Object(l.jsx)("div",{className:"col-sm-1"}),Object(l.jsxs)("div",{className:"col-sm-9",children:[Object(l.jsx)("br",{}),Object(l.jsx)(d.a,{striped:!0,bordered:!0,condensed:!0,hover:!0,style:{tableLayout:"fixed"},children:Object(l.jsxs)("tbody",{children:[Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Public Key"}),Object(l.jsx)("td",{style:{wordWrap:"break-word"},children:this.state.publicKey})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Private Key"}),Object(l.jsx)("td",{style:{wordWrap:"break-word"},children:this.state.privateKey})]}),Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:"Auth ID"}),Object(l.jsx)("td",{style:{wordWrap:"break-word"},children:this.state.authId})]})]})}),Object(l.jsx)("br",{})]}),Object(l.jsx)("div",{className:"col-sm-2"})]}),Object(l.jsx)("br",{}),Object(l.jsx)("div",{className:"row",children:Object(l.jsxs)("div",{className:"col-sm-12",children:[Object(l.jsx)(f.a,{value:this.state.tx,_db:this.props._db}),this.state.error?Object(l.jsxs)(h.a,{bsStyle:"danger",children:[Object(l.jsx)("h4",{children:"Error"}),Object(l.jsx)("p",{children:this.state.error})]}):null]})})]}):Object(l.jsx)("div",{className:"loading1"})})]})}}]),n}(i.a.Component)},508:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBoundPosition=function(e,t,n){if(!e.props.bounds)return[t,n];var o=e.props.bounds;o="string"===typeof o?o:function(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}}(o);var l=r(e);if("string"===typeof o){var c,i=l.ownerDocument,u=i.defaultView;if(!((c="parent"===o?l.parentNode:i.querySelector(o))instanceof u.HTMLElement))throw new Error('Bounds selector "'+o+'" could not find an element.');var d=u.getComputedStyle(l),h=u.getComputedStyle(c);o={left:-l.offsetLeft+(0,a.int)(h.paddingLeft)+(0,a.int)(d.marginLeft),top:-l.offsetTop+(0,a.int)(h.paddingTop)+(0,a.int)(d.marginTop),right:(0,s.innerWidth)(c)-(0,s.outerWidth)(l)-l.offsetLeft+(0,a.int)(h.paddingRight)-(0,a.int)(d.marginRight),bottom:(0,s.innerHeight)(c)-(0,s.outerHeight)(l)-l.offsetTop+(0,a.int)(h.paddingBottom)-(0,a.int)(d.marginBottom)}}(0,a.isNum)(o.right)&&(t=Math.min(t,o.right));(0,a.isNum)(o.bottom)&&(n=Math.min(n,o.bottom));(0,a.isNum)(o.left)&&(t=Math.max(t,o.left));(0,a.isNum)(o.top)&&(n=Math.max(n,o.top));return[t,n]},t.snapToGrid=function(e,t,n){var a=Math.round(t/e[0])*e[0],s=Math.round(n/e[1])*e[1];return[a,s]},t.canDragX=function(e){return"both"===e.props.axis||"x"===e.props.axis},t.canDragY=function(e){return"both"===e.props.axis||"y"===e.props.axis},t.getControlPosition=function(e,t,n){var a="number"===typeof t?(0,s.getTouch)(e,t):null;if("number"===typeof t&&!a)return null;var o=r(n),l=n.props.offsetParent||o.offsetParent||o.ownerDocument.body;return(0,s.offsetXYFromParent)(a||e,l,n.props.scale)},t.createCoreData=function(e,t,n){var s=e.state,o=!(0,a.isNum)(s.lastX),l=r(e);return o?{node:l,deltaX:0,deltaY:0,lastX:t,lastY:n,x:t,y:n}:{node:l,deltaX:t-s.lastX,deltaY:n-s.lastY,lastX:s.lastX,lastY:s.lastY,x:t,y:n}},t.createDraggableData=function(e,t){var n=e.props.scale;return{node:t.node,x:e.state.x+t.deltaX/n,y:e.state.y+t.deltaY/n,deltaX:t.deltaX/n,deltaY:t.deltaY/n,lastX:e.state.x,lastY:e.state.y}};var a=n(488),s=n(495);function r(e){var t=e.findDOMNode();if(!t)throw new Error("<DraggableCore>: Unmounted during event!");return t}},509:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){void 0}},512:function(e,t){},513:function(e,t){},515:function(e,t){},516:function(e,t){},518:function(e,t){},519:function(e,t){},520:function(e,t){},521:function(e,t){},522:function(e,t){},523:function(e,t){},524:function(e,t){},525:function(e,t){},526:function(e,t){},527:function(e,t){},531:function(e,t,n){"use strict";n.r(t),t.default="data:image/png;base64,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"},542:function(e,t,n){"use strict";var a=n(551),s=a.default,r=a.DraggableCore;e.exports=s,e.exports.default=s,e.exports.DraggableCore=r},551:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"DraggableCore",{enumerable:!0,get:function(){return u.default}}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==p(e)&&"function"!==typeof e)return{default:e};var t=f();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=a?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(n,s,r):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(n(0)),s=h(n(3)),r=h(n(37)),o=h(n(12)),l=n(495),c=n(508),i=n(488),u=h(n(553)),d=h(n(509));function h(e){return e&&e.__esModule?e:{default:e}}function f(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return f=function(){return e},e}function p(e){return(p="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function b(){return(b=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}function j(e,t){if(null==e)return{};var n,a,s=function(e,t){if(null==e)return{};var n,a,s={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,s=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(c){s=!0,r=c}finally{try{a||null==l.return||l.return()}finally{if(s)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function x(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function y(e,t,n){return t&&v(e.prototype,t),n&&v(e,n),e}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=C(e);if(t){var s=C(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return N(this,n)}}function N(e,t){return!t||"object"!==p(t)&&"function"!==typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(n,e);var t=w(n);function n(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),A(D(a=t.call(this,e)),"onDragStart",(function(e,t){if((0,d.default)("Draggable: onDragStart: %j",t),!1===a.props.onStart(e,(0,c.createDraggableData)(D(a),t)))return!1;a.setState({dragging:!0,dragged:!0})})),A(D(a),"onDrag",(function(e,t){if(!a.state.dragging)return!1;(0,d.default)("Draggable: onDrag: %j",t);var n=(0,c.createDraggableData)(D(a),t),s={x:n.x,y:n.y};if(a.props.bounds){var r=s.x,o=s.y;s.x+=a.state.slackX,s.y+=a.state.slackY;var l=m((0,c.getBoundPosition)(D(a),s.x,s.y),2),i=l[0],u=l[1];s.x=i,s.y=u,s.slackX=a.state.slackX+(r-s.x),s.slackY=a.state.slackY+(o-s.y),n.x=s.x,n.y=s.y,n.deltaX=s.x-a.state.x,n.deltaY=s.y-a.state.y}if(!1===a.props.onDrag(e,n))return!1;a.setState(s)})),A(D(a),"onDragStop",(function(e,t){if(!a.state.dragging)return!1;if(!1===a.props.onStop(e,(0,c.createDraggableData)(D(a),t)))return!1;(0,d.default)("Draggable: onDragStop: %j",t);var n={dragging:!1,slackX:0,slackY:0};if(Boolean(a.props.position)){var s=a.props.position,r=s.x,o=s.y;n.x=r,n.y=o}a.setState(n)})),a.state={dragging:!1,dragged:!1,x:e.position?e.position.x:e.defaultPosition.x,y:e.position?e.position.y:e.defaultPosition.y,prevPropsPosition:x({},e.position),slackX:0,slackY:0,isElementSVG:!1},!e.position||e.onDrag||e.onStop||console.warn("A `position` was applied to this <Draggable>, without drag handlers. This will make this component effectively undraggable. Please attach `onDrag` or `onStop` handlers so you can adjust the `position` of this element."),a}return y(n,null,[{key:"getDerivedStateFromProps",value:function(e,t){var n=e.position,a=t.prevPropsPosition;return!n||a&&n.x===a.x&&n.y===a.y?null:((0,d.default)("Draggable: getDerivedStateFromProps %j",{position:n,prevPropsPosition:a}),{x:n.x,y:n.y,prevPropsPosition:x({},n)})}}]),y(n,[{key:"componentDidMount",value:function(){"undefined"!==typeof window.SVGElement&&this.findDOMNode()instanceof window.SVGElement&&this.setState({isElementSVG:!0})}},{key:"componentWillUnmount",value:function(){this.setState({dragging:!1})}},{key:"findDOMNode",value:function(){return this.props.nodeRef?this.props.nodeRef.current:r.default.findDOMNode(this)}},{key:"render",value:function(){var e,t=this.props,n=(t.axis,t.bounds,t.children),s=t.defaultPosition,r=t.defaultClassName,i=t.defaultClassNameDragging,d=t.defaultClassNameDragged,h=t.position,f=t.positionOffset,p=(t.scale,j(t,["axis","bounds","children","defaultPosition","defaultClassName","defaultClassNameDragging","defaultClassNameDragged","position","positionOffset","scale"])),m={},g=null,O=!Boolean(h)||this.state.dragging,v=h||s,y={x:(0,c.canDragX)(this)&&O?this.state.x:v.x,y:(0,c.canDragY)(this)&&O?this.state.y:v.y};this.state.isElementSVG?g=(0,l.createSVGTransform)(y,f):m=(0,l.createCSSTransform)(y,f);var S=(0,o.default)(n.props.className||"",r,(A(e={},i,this.state.dragging),A(e,d,this.state.dragged),e));return a.createElement(u.default,b({},p,{onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop}),a.cloneElement(a.Children.only(n),{className:S,style:x(x({},n.props.style),m),transform:g}))}}]),n}(a.Component);t.default=R,A(R,"displayName","Draggable"),A(R,"propTypes",x(x({},u.default.propTypes),{},{axis:s.default.oneOf(["both","x","y","none"]),bounds:s.default.oneOfType([s.default.shape({left:s.default.number,right:s.default.number,top:s.default.number,bottom:s.default.number}),s.default.string,s.default.oneOf([!1])]),defaultClassName:s.default.string,defaultClassNameDragging:s.default.string,defaultClassNameDragged:s.default.string,defaultPosition:s.default.shape({x:s.default.number,y:s.default.number}),positionOffset:s.default.shape({x:s.default.oneOfType([s.default.number,s.default.string]),y:s.default.oneOfType([s.default.number,s.default.string])}),position:s.default.shape({x:s.default.number,y:s.default.number}),className:i.dontSetMe,style:i.dontSetMe,transform:i.dontSetMe})),A(R,"defaultProps",x(x({},u.default.defaultProps),{},{axis:"both",bounds:!1,defaultClassName:"react-draggable",defaultClassNameDragging:"react-draggable-dragging",defaultClassNameDragged:"react-draggable-dragged",defaultPosition:{x:0,y:0},position:null,scale:1}))},552:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPrefix=s,t.browserPrefixToKey=r,t.browserPrefixToStyle=function(e,t){return t?"-".concat(t.toLowerCase(),"-").concat(e):e},t.default=void 0;var a=["Moz","Webkit","O","ms"];function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"transform";if("undefined"===typeof window||"undefined"===typeof window.document)return"";var t=window.document.documentElement.style;if(e in t)return"";for(var n=0;n<a.length;n++)if(r(e,a[n])in t)return a[n];return""}function r(e,t){return t?"".concat(t).concat(function(e){for(var t="",n=!0,a=0;a<e.length;a++)n?(t+=e[a].toUpperCase(),n=!1):"-"===e[a]?n=!0:t+=e[a];return t}(e)):e}var o=s();t.default=o},553:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!==h(e)&&"function"!==typeof e)return{default:e};var t=d();if(t&&t.has(e))return t.get(e);var n={},a=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var r=a?Object.getOwnPropertyDescriptor(e,s):null;r&&(r.get||r.set)?Object.defineProperty(n,s,r):n[s]=e[s]}n.default=e,t&&t.set(e,n);return n}(n(0)),s=u(n(3)),r=u(n(37)),o=n(495),l=n(508),c=n(488),i=u(n(509));function u(e){return e&&e.__esModule?e:{default:e}}function d(){if("function"!==typeof WeakMap)return null;var e=new WeakMap;return d=function(){return e},e}function h(e){return(h="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],a=!0,s=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(a=(o=l.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(c){s=!0,r=c}finally{try{a||null==l.return||l.return()}finally{if(s)throw r}}return n}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=v(e);if(t){var s=v(this).constructor;n=Reflect.construct(a,arguments,s)}else n=a.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==h(t)&&"function"!==typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={start:"touchstart",move:"touchmove",stop:"touchend"},w={start:"mousedown",move:"mousemove",stop:"mouseup"},N=w,D=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(u,e);var t,n,s,c=g(u);function u(){var e;b(this,u);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return y(x(e=c.call.apply(c,[this].concat(n))),"state",{dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:null}),y(x(e),"mounted",!1),y(x(e),"handleDragStart",(function(t){if(e.props.onMouseDown(t),!e.props.allowAnyClick&&"number"===typeof t.button&&0!==t.button)return!1;var n=e.findDOMNode();if(!n||!n.ownerDocument||!n.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");var a=n.ownerDocument;if(!(e.props.disabled||!(t.target instanceof a.defaultView.Node)||e.props.handle&&!(0,o.matchesSelectorAndParentsTo)(t.target,e.props.handle,n)||e.props.cancel&&(0,o.matchesSelectorAndParentsTo)(t.target,e.props.cancel,n))){"touchstart"===t.type&&t.preventDefault();var s=(0,o.getTouchIdentifier)(t);e.setState({touchIdentifier:s});var r=(0,l.getControlPosition)(t,s,x(e));if(null!=r){var c=r.x,u=r.y,d=(0,l.createCoreData)(x(e),c,u);(0,i.default)("DraggableCore: handleDragStart: %j",d),(0,i.default)("calling",e.props.onStart),!1!==e.props.onStart(t,d)&&!1!==e.mounted&&(e.props.enableUserSelectHack&&(0,o.addUserSelectStyles)(a),e.setState({dragging:!0,lastX:c,lastY:u}),(0,o.addEvent)(a,N.move,e.handleDrag),(0,o.addEvent)(a,N.stop,e.handleDragStop))}}})),y(x(e),"handleDrag",(function(t){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,x(e));if(null!=n){var a=n.x,s=n.y;if(Array.isArray(e.props.grid)){var r=a-e.state.lastX,o=s-e.state.lastY,c=f((0,l.snapToGrid)(e.props.grid,r,o),2);if(r=c[0],o=c[1],!r&&!o)return;a=e.state.lastX+r,s=e.state.lastY+o}var u=(0,l.createCoreData)(x(e),a,s);if((0,i.default)("DraggableCore: handleDrag: %j",u),!1!==e.props.onDrag(t,u)&&!1!==e.mounted)e.setState({lastX:a,lastY:s});else try{e.handleDragStop(new MouseEvent("mouseup"))}catch(h){var d=document.createEvent("MouseEvents");d.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),e.handleDragStop(d)}}})),y(x(e),"handleDragStop",(function(t){if(e.state.dragging){var n=(0,l.getControlPosition)(t,e.state.touchIdentifier,x(e));if(null!=n){var a=n.x,s=n.y,r=(0,l.createCoreData)(x(e),a,s);if(!1===e.props.onStop(t,r)||!1===e.mounted)return!1;var c=e.findDOMNode();c&&e.props.enableUserSelectHack&&(0,o.removeUserSelectStyles)(c.ownerDocument),(0,i.default)("DraggableCore: handleDragStop: %j",r),e.setState({dragging:!1,lastX:NaN,lastY:NaN}),c&&((0,i.default)("DraggableCore: Removing handlers"),(0,o.removeEvent)(c.ownerDocument,N.move,e.handleDrag),(0,o.removeEvent)(c.ownerDocument,N.stop,e.handleDragStop))}}})),y(x(e),"onMouseDown",(function(t){return N=w,e.handleDragStart(t)})),y(x(e),"onMouseUp",(function(t){return N=w,e.handleDragStop(t)})),y(x(e),"onTouchStart",(function(t){return N=S,e.handleDragStart(t)})),y(x(e),"onTouchEnd",(function(t){return N=S,e.handleDragStop(t)})),e}return t=u,(n=[{key:"componentDidMount",value:function(){this.mounted=!0;var e=this.findDOMNode();e&&(0,o.addEvent)(e,S.start,this.onTouchStart,{passive:!1})}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var e=this.findDOMNode();if(e){var t=e.ownerDocument;(0,o.removeEvent)(t,w.move,this.handleDrag),(0,o.removeEvent)(t,S.move,this.handleDrag),(0,o.removeEvent)(t,w.stop,this.handleDragStop),(0,o.removeEvent)(t,S.stop,this.handleDragStop),(0,o.removeEvent)(e,S.start,this.onTouchStart,{passive:!1}),this.props.enableUserSelectHack&&(0,o.removeUserSelectStyles)(t)}}},{key:"findDOMNode",value:function(){return this.props.nodeRef?this.props.nodeRef.current:r.default.findDOMNode(this)}},{key:"render",value:function(){return a.cloneElement(a.Children.only(this.props.children),{onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}}])&&j(t.prototype,n),s&&j(t,s),u}(a.Component);t.default=D,y(D,"displayName","DraggableCore"),y(D,"propTypes",{allowAnyClick:s.default.bool,disabled:s.default.bool,enableUserSelectHack:s.default.bool,offsetParent:function(e,t){if(e[t]&&1!==e[t].nodeType)throw new Error("Draggable's offsetParent must be a DOM Node.")},grid:s.default.arrayOf(s.default.number),handle:s.default.string,cancel:s.default.string,nodeRef:s.default.object,onStart:s.default.func,onDrag:s.default.func,onStop:s.default.func,onMouseDown:s.default.func,scale:s.default.number,className:c.dontSetMe,style:c.dontSetMe,transform:c.dontSetMe}),y(D,"defaultProps",{allowAnyClick:!1,cancel:null,disabled:!1,enableUserSelectHack:!0,offsetParent:null,handle:null,grid:null,transform:null,onStart:function(){},onDrag:function(){},onStop:function(){},onMouseDown:function(){},scale:1})},572:function(e,t,n){"use strict";n.r(t),n.d(t,"NewDatabaseModal",(function(){return P})),n.d(t,"ConfirmDatabaseDeletionModal",(function(){return F})),n.d(t,"Database",(function(){return L})),n.d(t,"ArchivedDatabase",(function(){return B})),n.d(t,"Users",(function(){return z})),n.d(t,"PanelStat",(function(){return U}));var a=n(63),s=n(78),r=n(31),o=n(32),l=n(46),c=n(45),i=n(4),u=n(0),d=n.n(u),h=n(93),f=n(484),p=n(466),b=n(462),j=n(464),m=n(463),g=n(467),O=n(132),x=n(812),v=n(460),y=n(461),S=n(550),w=n(1041),N=n(1033),D=n(109),C=n.n(D),A=n(542),R=n.n(A),T=n(94),k=n(465);function _(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t&=t}return t}d.a.Component;function M(e){return new Promise((function(t){return setTimeout(t,e)}))}u.Component,u.Component,u.Component;var I=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={error:null},e.refreshForm=function(){e.setState({error:null,loading:!1})},e.removeUser=function(){var t=e.props,n=t.username,a=t.removeUserModalToggle,s=t.getAccountInfo,r=e.props._db,o=r.account,l=r.token;e.setState({loading:!0});var c={endpoint:"action",auth:l,body:["remove-user",{username:n,account:o}]};Object(h.a)(c).then((function(e){return M(300)})).then((function(t){e.state.self?e.props.logout():(e.setState({loading:!1}),s())})).then((function(){return a()})).catch((function(t){e.setState({error:t.message||t.error||JSON.stringify(t),loading:!1})}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){_(this.props.username)===Number(localStorage.getItem("username"))?this.setState({self:!0}):this.setState({self:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.removeUserModalToggle,a=t.username,s=t.account;return Object(i.jsxs)(p.a,{show:!0,onHide:function(){return n()},children:[Object(i.jsx)(p.a.Header,{closeButton:!0,children:Object(i.jsxs)(p.a.Title,{style:{fontSize:"20px",fontWeight:"lighter"},children:[Object(i.jsx)("i",{className:"fas fa-user-slash"})," \xa0 Remove User:"," ",Object(i.jsx)("strong",{className:"text-primary",children:a})," from Account:"," ",Object(i.jsx)("strong",{className:"text-primary",children:s}),Object(i.jsx)("hr",{})]})}),Object(i.jsxs)(p.a.Body,{children:[Object(i.jsxs)("h3",{children:["Removing user\xa0",Object(i.jsx)("strong",{className:"text-primary",children:a})," from account:\xa0",Object(i.jsx)("strong",{className:"text-primary",children:s}),"."]}),Object(i.jsx)("br",{}),this.state.self?Object(i.jsxs)(x.a,{bsStyle:"danger",children:[Object(i.jsxs)("h3",{children:["You are logged in as ",a,"."]}),Object(i.jsx)("br",{}),"Removing yourself from this account will log you out and remove your access from the ledgers associated with this account."]}):Object(i.jsxs)("ul",{children:[Object(i.jsxs)("li",{children:["This user will not be able to view any of the ledgers associated with this account."," "]}),Object(i.jsx)("br",{})]}),Object(i.jsx)("div",{className:"text-right",children:Object(i.jsx)(O.a,{bsStyle:"danger",disabled:this.state.loading,onClick:function(){return e.removeUser()},children:"Remove User"})}),Object(i.jsx)("br",{}),this.state.error?Object(i.jsxs)(x.a,{bsStyle:"danger",onDismiss:function(){return e.refreshForm()},children:[Object(i.jsx)("h4",{children:"Error"}),Object(i.jsx)("p",{children:this.state.error})]}):null]})]})}}]),n}(u.Component),P=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={id:"",error:null},e.refreshForm=function(){e.setState({id:"",error:null,loading:!1})},e.getValidationState=function(){return e.state.id.length>0&&null!==e.state.id.match(/^[a-z][a-z0-9-]*\/[a-z][a-z0-9-]*$/)?"success":"warning"},e.onGenerate=function(t){e.setState({loading:!0}),t.preventDefault();e.state.blockNumber&&Number(e.state.blockNumber)>0&&Number(e.state.blockNumber);var n={"db/id":e.state.id},a=e.props._db,s=a.ip,r=a.token,o={ip:s,endpoint:"new-db",body:n,auth:r},l=e.props._db.refreshDbs;Object(h.a)(o).then((function(t){200===t.status?(l(s),e.props.newDatabaseModalToggle()):e.setState({error:t.message,loading:!1})})).catch((function(t){e.setState({error:t.json.message||t.error||JSON.stringify(t),loading:!1})}))},e}return Object(o.a)(n,[{key:"handleChange",value:function(e,t){var n={};n[e]=t.target.value,this.setState(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.newDatabaseModalToggle;t._db;return Object(i.jsx)(R.a,{enableUserSelectHack:!1,children:Object(i.jsxs)(p.a,{show:!0,onHide:function(){return n()},children:[Object(i.jsx)(p.a.Header,{closeButton:!0,children:Object(i.jsxs)(p.a.Title,{style:{fontSize:"20px",fontWeight:"lighter"},children:[Object(i.jsx)("i",{className:"fas fa-cube"})," \xa0 Create New Ledger",Object(i.jsx)("hr",{style:{marginBottom:"0px"}})]})}),Object(i.jsx)(p.a.Body,{children:Object(i.jsxs)(u.Fragment,{children:[Object(i.jsxs)("p",{children:[Object(i.jsx)("b",{children:"Note:"}),' A Ledger Id uniquely identifies a ledger within a network. A Ledger Id begins with the network name (e.g myNetwork) followed by a forward slash "/" and the Ledger name (e.g myLedger).',Object(i.jsx)("br",{})]}),Object(i.jsx)("p",{children:Object(i.jsxs)("em",{children:[Object(i.jsx)("b",{children:"A Ledger Id example:"})," myNetwork/myLedger"]})}),Object(i.jsxs)(b.a,{onSubmit:this.onGenerate.bind(this),children:[Object(i.jsx)(j.a,{style:{margin:"20px 0"},children:"Ledger Id"}),Object(i.jsx)(m.a,{controlId:"formBasicText",validationState:this.getValidationState(),children:Object(i.jsx)("span",{children:Object(i.jsx)(g.a,{onMouseDown:function(e){e.stopPropagation()},type:"text",value:this.state.id,placeholder:"Begin ledger id",onChange:function(t){return e.handleChange("id",t)}})})}),Object(i.jsx)(m.a,{className:"text-right",children:Object(i.jsx)(O.a,{className:"fluree-rounded-button",type:"submit",disabled:"warning"===this.getValidationState()||this.state.loading,children:"Create"})}),this.state.error?Object(i.jsxs)(x.a,{bsStyle:"danger",onDismiss:function(){return e.setState({error:null})},children:[Object(i.jsx)("h4",{children:"Error"}),Object(i.jsx)("p",{children:this.state.error})]}):null]})]})})]})})}}]),n}(u.Component),E=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={username:"",error:null},e.refreshForm=function(){e.setState({username:"",error:null,loading:!1})},e.onGenerate=function(t){t.preventDefault(),e.setState({loading:!0});var n=e.props._db,a=n.account,s=n.token,r=e.props,o=r.newUserModalToggle,l=r.getAccountInfo,c={endpoint:"action",auth:s,body:["new-user",{username:e.state.username.toLowerCase(),account:a,sendEmail:!0}]};Object(h.a)(c).then((function(t){200===t.status?(e.setState({username:"",loading:!1}),l(),o()):e.setState({error:t.message,loading:!1})})).catch((function(t){e.setState({error:t.message||t.error||JSON.stringify(t),loading:!1,dbName:e.props.account+"."})}))},e}return Object(o.a)(n,[{key:"getValidationState",value:function(){var e=this.state.username;return e.length<1||/^[\w-+]+(\.[\w]+)*@[\w-]+(\.[\w]+)*(\.[a-z]{2,})$/.test(e)?"success":"error"}},{key:"handleChange",value:function(e){this.setState({username:e.target.value})}},{key:"render",value:function(){var e=this,t=this.props.newUserModalToggle;return Object(i.jsx)(R.a,{enableUserSelectHack:!1,children:Object(i.jsxs)(p.a,{show:!0,onHide:function(){return t()},children:[Object(i.jsx)(p.a.Header,{closeButton:!0,children:Object(i.jsxs)(p.a.Title,{style:{fontSize:"20px",fontWeight:"lighter"},children:[Object(i.jsx)("i",{className:"fas fa-user"})," \xa0 Add User to Account",Object(i.jsx)("hr",{})]})}),Object(i.jsx)(p.a.Body,{children:Object(i.jsxs)(b.a,{onSubmit:this.onGenerate.bind(this),children:[Object(i.jsx)(j.a,{className:"mt20 mb20",children:"User Email Address"}),Object(i.jsxs)(m.a,{controlId:"formBasicText",validationState:this.getValidationState(),children:[Object(i.jsx)(g.a,{onMouseDown:function(e){e.stopPropagation()},type:"text",value:this.state.username,placeholder:"Enter email address for new user",onChange:this.handleChange.bind(this),autoFocus:!0}),Object(i.jsx)(g.a.Feedback,{})]}),Object(i.jsx)("p",{children:"User will receive an email explaining next steps."}),Object(i.jsx)(m.a,{className:"text-right",children:Object(i.jsx)(O.a,{bsStyle:"primary",type:"submit",disabled:"error"===this.getValidationState()||this.state.loading,children:"Create"})}),this.state.error?Object(i.jsxs)(x.a,{bsStyle:"danger",onDismiss:function(){return e.refreshForm()},children:[Object(i.jsx)("h4",{children:"Error"}),Object(i.jsx)("p",{children:this.state.error})]}):null]})})]})})}}]),n}(u.Component),F=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={confirmDeletion:"",confirmDeletionAuthIDAndPrivateKey:null,error:null,confirmDeletionAuthID:null,confirmDeletionPrivateKey:null},e.deleteDB=function(t,n,a){var s,r=e.props._db,o=r.openApiServer,l=r.displayError;t.preventDefault();var c={"db/id":n},i="delete-db",u=e.props._db.refreshDbs;if(o)s={ip:a,endpoint:i,body:c,auth:e.props.token};else{var d=e.state.confirmDeletionAuthID,p=e.state.confirmDeletionPrivateKey,b=Object(h.b)(a)||"",j=Object(f.signRequest)("POST","".concat(b,"/fdb/delete-db"),JSON.stringify({"db/id":n,auth:d}),p,d),m=j.headers,g=j.body;s={ip:a,endpoint:i,body:JSON.parse(g),headers:m,auth:e.props.token,noRedirect:!0}}var O,x=e.props.confirmDatabaseDeletionModalToggle;O=s,Object(h.a)(O).then((function(t){200===t.status?u(a):(e.setState({error:t.message,loading:!1}),l(t.message))})).catch((function(t){var n=t.json||t,a=n.message||n.error||JSON.stringify(t);e.setState({error:a,loading:!1}),l(a)})),x()},e.handleChangeForConfirmDeleteTextbox=function(t){e.setState({confirmDeletion:t.target.value})},e.handleChangeForConfirmPrivateKeyTextbox=function(t){e.setState({confirmDeletionPrivateKey:t.target.value})},e.handleChangeForConfirmAuthIDTextbox=function(t){e.setState({confirmDeletionAuthID:t.target.value})},e.getValidationState=function(){return e.props._db.openApiServer?"confirm"!==e.state.confirmDeletion:!e.state.confirmDeletionAuthID||!e.state.confirmDeletionPrivateKey},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.confirmDatabaseDeletionModalToggle,a=t.db,s=t.ip,r=this.props._db.openApiServer;return console.log("openApiServer",r),console.log(this.props._db),Object(i.jsx)(u.Fragment,{children:Object(i.jsx)(R.a,{enableUserSelectHack:!1,children:Object(i.jsxs)(p.a,{show:!0,onHide:function(){return n()},children:[Object(i.jsx)(p.a.Header,{closeButton:!0,children:Object(i.jsxs)(p.a.Title,{children:["Are you sure you want to DELETE this ledger?"," "]})}),Object(i.jsxs)(b.a,{onSubmit:function(t){return e.deleteDB(t,a,s)},children:[r&&Object(i.jsxs)(p.a.Body,{children:[Object(i.jsx)("p",{children:'Please, enter "confirm" to DELETE ledger.'}),Object(i.jsx)(m.a,{children:Object(i.jsx)(g.a,{onMouseDown:function(e){e.stopPropagation()},type:"text",value:this.state.confirmDeletion,placeholder:"Enter 'confirm' to DELETE ledger",onChange:function(t){return e.handleChangeForConfirmDeleteTextbox(t)},autoFocus:!0})})]}),!r&&Object(i.jsxs)(p.a.Body,{children:[Object(i.jsxs)("p",{children:["Server Open-Api status is currently set to ",Object(i.jsx)("i",{children:"'false'"}),". Please provide an ",Object(i.jsx)("b",{children:"AuthID"})," and ",Object(i.jsx)("b",{children:"Private Key"})," to"," ",Object(i.jsx)("span",{style:{color:"red"},children:"DELETE"})," ledger."]}),Object(i.jsxs)(m.a,{children:[Object(i.jsx)("p",{children:"AuthID"}),Object(i.jsx)(g.a,{onMouseDown:function(e){e.stopPropagation()},type:"text",value:this.state.confirmDeletionAuthID,placeholder:"Enter 'AuthID' to DELETE ledger",onChange:function(t){return e.handleChangeForConfirmAuthIDTextbox(t)},autoFocus:!0}),Object(i.jsx)("br",{}),Object(i.jsx)("p",{children:"Private Key"}),Object(i.jsx)(g.a,{onMouseDown:function(e){e.stopPropagation()},type:"text",value:this.state.confirmDeletionPrivateKey,placeholder:"Enter 'Private Key' to DELETE ledger",onChange:function(t){return e.handleChangeForConfirmPrivateKeyTextbox(t)},autoFocus:!0})]})]}),Object(i.jsx)(p.a.Footer,{children:Object(i.jsx)(O.a,{style:{borderRadius:"32px"},bsStyle:"danger",type:"submit",disabled:this.getValidationState(),children:"DELETE"})}),this.state.error?Object(i.jsxs)(x.a,{style:{margin:"0 10px 10px"},bsStyle:"danger",onDismiss:function(){return e.setState({error:null})},children:[Object(i.jsx)("h4",{children:"Error"}),Object(i.jsx)("p",{children:this.state.error})]}):null]})]})})})}}]),n}(u.Component),L=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={loading:!1,error:null,confirmDatabaseDeletionModal:!1},e.confirmDatabaseDeletionModalToggle=function(){e.setState({confirmDatabaseDeletionModal:!e.state.confirmDatabaseDeletionModal})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.db,a=t.ip,s=t._db,r=t.block,o=t.size,l=t.flakes,c=n.length>60?n.substring(0,40).concat("..."):n;return Object(i.jsxs)(u.Fragment,{children:[!0===this.state.confirmDatabaseDeletionModal?Object(i.jsx)(F,{confirmDatabaseDeletionModalToggle:this.confirmDatabaseDeletionModalToggle,db:n,ip:a,_db:s}):null,Object(i.jsxs)("tr",{children:[Object(i.jsx)("td",{style:{textAlign:"left"},children:Object(i.jsxs)("span",{style:{display:"flex",direction:"row"},children:[Object(i.jsx)("span",{children:c}),Object(i.jsxs)("span",{class:"snap-shot-delete-wrapper",style:{marginLeft:"auto"},children:[Object(i.jsx)("span",{style:{padding:"4px 10px",cursor:"pointer",borderRadius:"32px",marginLeft:"10px"},className:"danger",onClick:function(){return e.confirmDatabaseDeletionModalToggle()},children:Object(i.jsx)("i",{className:"fas fa-trash hidden-xs","aria-hidden":"true",style:{padding:"5px"}})})," "]})]})}),Object(i.jsx)("td",{children:r}),Object(i.jsx)("td",{children:(parseInt(o)/1024).toFixed(2)}),Object(i.jsx)("td",{children:l})]},n)]})}}]),n}(u.Component),B=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).viewURL=function(t){t?window.open(t,"_blank"):e.props._db.setGlobalProps("error",{error:"No URL Found",message:"No URL found for this ledger archive. Please contact support@flur.ee for additional assistance."})},e.viewArchive=function(t,n){return Object(i.jsxs)(v.a,{value:n.concat("viewArchive"),onClick:function(){return e.viewURL(t)},children:[Object(i.jsx)("i",{className:"far fa-file-archive"}),"\xa0\xa0View Archive"]},n.concat("viewArchive"))},e.deleteArchive=function(t){return Object(i.jsxs)(v.a,{value:t.concat("deleteArchive"),onClick:function(){return e.props.deleteArchiveModalToggle(t)},children:[Object(i.jsx)("i",{className:"far fa-trash-alt"}),"\xa0\xa0Delete Archive"]},t.concat("deleteArchive"))},e.viewBackups=function(t,n){return Object(i.jsxs)(v.a,{value:n.concat("backup-view"),onClick:function(){return e.viewURL(t)},children:[Object(i.jsx)("i",{className:"fas fa-eye"}),"\xa0\xa0View Back-ups"]},n.concat("backup-view"))},e.dropdown=function(t,n,a){return"deleted"===t?Object(i.jsx)(y.a,{disabled:!0,title:"Archive Deleted",children:" "}):n?Object(i.jsxs)(y.a,{title:"Options",id:"Archive Options",children:[e.viewArchive(t,a),e.viewBackups(n,a),e.deleteArchive(a)]}):Object(i.jsxs)(y.a,{title:"Options",id:"Archive Options",children:[e.viewArchive(t,a),e.deleteArchive(a)]})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.url,a=e.backup;return Object(i.jsx)(S.a,{children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"col-xs-6",style:{lineHeight:"40px"},children:[Object(i.jsx)("i",{className:"far fa-file-archive hidden-xs","aria-hidden":"true",style:{paddingRight:"5px"}}),"\xa0",Object(i.jsx)("h3",{style:{display:"inline"},children:t})]}),Object(i.jsx)("div",{className:"col-xs-6",children:this.dropdown(n,a,t)})]})})}}]),n}(u.Component),z=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.username,n=e.removeUserModalToggle,a=t.length>18?t.substring(0,15).concat("..."):t;return Object(i.jsx)(S.a,{children:Object(i.jsxs)("div",{className:"row",children:[Object(i.jsxs)("div",{className:"col-xs-7",style:{lineHeight:"40px"},children:[Object(i.jsx)("i",{className:"fas fa-user hidden-sm","aria-hidden":"true",style:{paddingRight:"5px"}}),"\xa0",a.length!==t.length?Object(i.jsx)(w.a,{placement:"top",overlay:Object(i.jsx)(N.a,{children:t},t),children:Object(i.jsx)("h3",{style:{display:"inline"},children:a})},t):Object(i.jsx)("h3",{style:{display:"inline"},children:a})]}),Object(i.jsx)("div",{className:"pull-right",style:{marginRight:"10px"},children:Object(i.jsxs)(O.a,{value:t,onClick:function(){return n(t)},children:[Object(i.jsx)("i",{className:"fas fa-user-slash"}),"\xa0\xa0Remove"]},t)})]})},t)}}]),n}(u.Component),U=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(o.a)(n,[{key:"render",value:function(){var e=this.props,t=e.switchType,n=e.type;return Object(i.jsxs)("div",{className:"panel-stat",onClick:t?function(){return t(n)}:null,style:{cursor:t?"pointer":"default",borderRadius:"7px"},children:[Object(i.jsx)("div",{className:"panel-stat-left",children:Object(i.jsx)("i",{style:{padding:"fas fa-tag bg-success"===this.props.iconClass?"25px":null,borderRadius:"7px 0 0 7px"},className:this.props.iconClass})}),Object(i.jsxs)("div",{className:"panel-stat-right",children:[Object(i.jsx)("div",{className:"stat",children:this.props.stat}),Object(i.jsx)("div",{className:"stat-text",children:this.props.statText})]})]})}}]),n}(u.Component),H=function(e){Object(l.a)(n,e);var t=Object(c.a)(n);function n(){var e;Object(r.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(e=t.call.apply(t,[this].concat(s))).state={newDatabaseModal:!1,dataBasesWithInfo:[],isLoadingDatabaseInfo:!0,configModal:!1,confirmDatabaseDeletionModal:!1,checkDbs:e.props._db,dbsLength:e.props._db.dbs.length,databaseHeader:["Ledger","Current Block","Size(Kb)","Flakes"]},e.setOpenApiServerStatus=function(e){var t={openApiServerStatusShow:!e};localStorage.setItem("openApiServerConfig",JSON.stringify(t))},e.getOpenApiServerStatus=function(){var e=localStorage.getItem("openApiServerConfig");return e=JSON.parse(e),C()(e,"openApiServerStatusShow")},e.newDatabaseModalToggle=function(){e.setState({newDatabaseModal:!e.state.newDatabaseModal}),e.forceUpdate()},e.newUserModalToggle=function(){e.setState({newUserModal:!e.state.newUserModal})},e.renderTableHeader=function(e){return e.map((function(e){switch(e){case"Ledger":return Object(i.jsxs)("th",{style:{textAlign:"left"},children:[Object(i.jsx)("span",{children:Object(i.jsx)("i",{className:"fas fa-database hidden-xs","aria-hidden":"true",style:{paddingRight:"5px"}})}),e,Object(i.jsx)("span",{})]});case"Current Block":return Object(i.jsxs)("th",{style:{textAlign:"center"},children:[Object(i.jsx)("span",{children:Object(i.jsx)("i",{className:"fas fa-cube hidden-xs","aria-hidden":"true",style:{paddingRight:"5px"}})}),e]});case"Size(Kb)":return Object(i.jsx)("th",{style:{textAlign:"center"},children:e});case"Flakes":return Object(i.jsxs)("th",{style:{textAlign:"center"},children:[Object(i.jsx)("span",{children:Object(i.jsx)("i",{className:"fas fa-snowflake hidden-xs","aria-hidden":"true",style:{paddingRight:"5px"}})}),e]})}}))},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.loadDatabaseInfo();var t={endpoint:"nw-state",ip:this.props._db.ip,noRedirect:!0};Object(h.a)(t).then((function(t){if(void 0===e.getOpenApiServerStatus())e.setOpenApiServerStatus(t.json["open-api"]),e.setState({openApiServer:t.json["open-api"]});else{var n=e.getOpenApiServerStatus();e.setState({openApiServer:t.json["open-api"],showServerOpenApiAlert:n})}})).catch((function(t){e.displayError(t)}))}},{key:"componentDidUpdate",value:function(e,t){t.dbsLength!==this.state.dbsLength&&this.loadDatabaseInfo()}},{key:"displayError",value:function(e){this.setState({error:e})}},{key:"loadDatabaseInfo",value:function(){var e=this,t=[],n=this.props._db,a=n.ip,r=n.token;n.dbs.map((function(e){return[].concat(Object(s.a)(e.split("/")),[e])})).forEach((function(n){var s={endpoint:"ledger-stats",ip:a,network:n[0],db:n[1],auth:r};t.push(e.getDatabasesInfo(s,n[2]))})),Promise.all(t).then((function(t){e.setState({dataBasesWithInfo:Object(s.a)(t),isLoadingDatabaseInfo:!1})})).catch((function(t){401===t.status?e.props._db.displayConfig():e.setState({error:JSON.stringify(t),isLoadingDatabaseInfo:!1,loading:!1})}))}},{key:"getDatabasesInfo",value:function(e,t){return new Promise((function(n,s){Object(h.a)(e).then((function(e){if(e.json&&e.json.data){var s=e.json.data;n(Object(a.a)(Object(a.a)({},s),{},{databaseName:t}))}else{var r={msg:e.message?e.message:e};n(Object(a.a)(Object(a.a)({},r),{},{databaseName:t}))}})).catch((function(e){s(e)}))}))}},{key:"sortBy",value:function(e,t){return e.sort((function(e,n){var a=C()(e,t,"z").toUpperCase(),s=C()(n,t,"z").toUpperCase();return a<s?-1:a>s?1:0})),e}},{key:"archiveDatabaseModalToggle",value:function(e){this.setState({archiveDatabaseModal:!this.state.archiveDatabaseModal,dbName:e})}},{key:"backupDatabaseModalToggle",value:function(e){this.setState({backupDatabaseModal:!this.state.backupDatabaseModal,dbName:e})}},{key:"removeUserModalToggle",value:function(e){this.setState({removeUserModal:!this.state.removeUserModal,username:e})}},{key:"render",value:function(){var e=this,t=this.props._db,n=this.props._db,s=n.account,r=n.dbs,o=n.ip,l=n.token,c=this.state,u=(c.maxDbs,c.maxUsers,c.users,1===r.length?"LEDGER":"LEDGERS"),d=r.length;return r?Object(i.jsxs)("div",{style:{paddingLeft:"40px",marginTop:"40px",height:"100%",width:"100%"},children:[!0===this.state.newDatabaseModal?Object(i.jsx)(P,{_db:t,newDatabaseModalToggle:this.newDatabaseModalToggle,openApiServerStatus:this.state.openApiServer}):null,!0===this.state.newUserModal?Object(i.jsx)(E,Object(a.a)(Object(a.a)({},this.props),{},{_db:t,newUserModalToggle:this.newUserModalToggle,getAccountInfo:this.getAccountInfo.bind(this)})):null,!0===this.state.removeUserModal?Object(i.jsx)(I,Object(a.a)(Object(a.a)({},this.props),{},{_db:t,account:s,username:this.state.username,history:this.props.history,removeUserModalToggle:this.removeUserModalToggle.bind(this),getAccountInfo:this.getAccountInfo.bind(this)})):null,Object(i.jsxs)("div",{className:"row",children:[Object(i.jsx)("h3",{style:{alignItems:"center",marginBottom:"7px"},children:Object(i.jsx)("span",{style:{color:"#091133"},children:"".concat(u," (").concat(d,")")})}),Object(i.jsxs)("div",{children:[this.state.isLoadingDatabaseInfo?"Loading....":Object(i.jsx)("div",{id:"scroll-div-container",className:"table-container network-page-table-container",style:{maxHeight:"585px"},children:Object(i.jsxs)("table",{className:"block-table block-table-stripes",ref:"scrollContent",striped:!0,bordered:!0,hover:!0,size:"sm",children:[Object(i.jsx)("thead",{style:{padding:"15px"},children:this.renderTableHeader(this.state.databaseHeader)}),Object(i.jsx)("tbody",{children:this.state.dataBasesWithInfo.map((function(n){return Object(i.jsx)(L,{db:n.databaseName,block:n.block,size:n.size,flakes:n.flakes,dbLength:r.length,ip:o,token:l,_db:t,msg:n.msg,newDatabaseModalToggle:e.newDatabaseModalToggle,openApiServerStatus:e.state.openApiServer},n.databaseName)}))})]})}),Object(i.jsx)("div",{style:{textAlign:"center",marginTop:"7px"},children:Object(i.jsxs)(O.a,{className:"fluree-rounded-button",id:"new-database-button",onClick:this.newDatabaseModalToggle,children:[Object(i.jsx)("i",{className:"fas fa-plus"})," \xa0Add Ledger"]})})]})]})]}):Object(i.jsx)("div",{className:"loading1",children:" Loading... "})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e._db!==t.checkDbs?{dbsLength:e._db.dbs.length}:null}}]),n}(u.Component);t.default=H},573:function(e,t,n){"use strict";var a=n(9),s=n(11),r=n(13),o=n(12),l=n.n(o),c=n(0),i=n.n(c),u=n(8),d=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=Object(s.a)(e,["className"]),r=Object(u.f)(n),o=r[0],c=r[1],d=Object(u.d)(o);return i.a.createElement("span",Object(a.a)({},c,{className:l()(t,d)}))},t}(i.a.Component),h=Object(u.a)("input-group-addon",d),f=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=Object(s.a)(e,["className"]),r=Object(u.f)(n),o=r[0],c=r[1],d=Object(u.d)(o);return i.a.createElement("span",Object(a.a)({},c,{className:l()(t,d)}))},t}(i.a.Component),p=Object(u.a)("input-group-btn",f),b=n(28),j=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=Object(s.a)(e,["className"]),r=Object(u.f)(n),o=r[0],c=r[1],d=Object(u.d)(o);return i.a.createElement("span",Object(a.a)({},c,{className:l()(t,d)}))},t}(i.a.Component);j.Addon=h,j.Button=p;t.a=Object(u.a)("input-group",Object(u.b)([b.c.LARGE,b.c.SMALL],j))},610:function(e,t,n){"use strict";var a=n(9),s=n(11),r=n(13),o=n(3),l=n.n(o),c=n(0),i=n.n(c),u=n(132),d={type:l.a.oneOf(["checkbox","radio"]),name:l.a.string,checked:l.a.bool,disabled:l.a.bool,onChange:l.a.func,value:l.a.any.isRequired},h=function(e){function t(){return e.apply(this,arguments)||this}return Object(r.a)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.name,r=e.checked,o=e.type,l=e.onChange,c=e.value,d=Object(s.a)(e,["children","name","checked","type","onChange","value"]),h=d.disabled;return i.a.createElement(u.a,Object(a.a)({},d,{active:!!r,componentClass:"label"}),i.a.createElement("input",{name:n,type:o,autoComplete:"off",value:c,checked:!!r,disabled:!!h,onChange:l}),t)},t}(i.a.Component);h.propTypes=d,t.a=h}}]);
//# sourceMappingURL=15.dad99378.chunk.js.map